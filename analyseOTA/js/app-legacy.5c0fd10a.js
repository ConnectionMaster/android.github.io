(function(){"use strict";var e={2848:function(e,t,n){n(6992),n(8674),n(9601),n(7727);var r=n(9963),a=(n(1778),n(6784)),o=n(6491),i=n(1731),s=(0,a.R)({components:o,directives:i,theme:{defaultTheme:"dark"}}),l=n(6252),u=n(3577),c=(0,l.Uk)(" OTA Analyzer ");function p(e,t,n,r,a,o){var i=(0,l.up)("v-app-bar-title"),s=(0,l.up)("v-spacer"),p=(0,l.up)("v-btn"),f=(0,l.up)("v-app-bar"),d=(0,l.up)("router-view"),h=(0,l.up)("v-container"),g=(0,l.up)("v-main"),m=(0,l.up)("v-app");return(0,l.wg)(),(0,l.j4)(m,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(f,{rounded:"",color:"primary"},{default:(0,l.w5)((function(){return[(0,l.Wm)(i,null,{default:(0,l.w5)((function(){return[c]})),_:1}),(0,l.Wm)(s),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.links,(function(e){return(0,l.wg)(),(0,l.j4)(p,{key:"".concat(e,"-header-link"),to:{name:e},class:"ml-5",color:"primary"},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,u.zw)(e),1)]})),_:2},1032,["to"])})),128))]})),_:1}),(0,l.Wm)(g,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(h,{fluid:""},{default:(0,l.w5)((function(){return[(0,l.Wm)(d)]})),_:1})]})),_:1})]})),_:1})}var f={data:function(){return{links:["Analysis","Demo","About"]}}},d=n(3744);const h=(0,d.Z)(f,[["render",p]]);var g=h,m=(n(9826),n(1539),n(7042),n(1249),n(1038),n(8783),n(2119)),y=(0,l.Uk)("This tool does not upload your package anywhere. All analysis are done in the frontend using Javascript.");function w(e,t,n,r,a,o){var i=(0,l.up)("v-alert"),s=(0,l.up)("v-row"),u=(0,l.up)("BaseFile"),c=(0,l.up)("PayloadDetail"),p=(0,l.up)("v-col"),f=(0,l.up)("v-divider"),d=(0,l.up)("PayloadComposition");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(s,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(i,{style:{color:"yellow"}},{default:(0,l.w5)((function(){return[y]})),_:1})]})),_:1}),(0,l.Wm)(s,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(p,{cols:"12",md:"6"},{default:(0,l.w5)((function(){return[(0,l.Wm)(u,{label:"Please drag and drop an OTA package or select one",onFileSelect:e.unpackOTA},null,8,["onFileSelect"]),e.zipFile&&e.payload?((0,l.wg)(),(0,l.j4)(c,{key:0,zipFile:e.zipFile,payload:e.payload},null,8,["zipFile","payload"])):(0,l.kq)("",!0)]})),_:1}),(0,l.Wm)(f,{vertical:""}),(0,l.Wm)(p,{cols:"12",md:"6"},{default:(0,l.w5)((function(){return[e.zipFile&&e.payload.manifest?((0,l.wg)(),(0,l.j4)(d,{key:0,manifest:e.payload.manifest},null,8,["manifest"])):(0,l.kq)("",!0)]})),_:1})]})),_:1})],64)}var b=n(170),v=(n(5666),{class:"file-select ma-5"}),O={key:0},x={key:1},k={key:2};function _(e,t,n,a,o,i){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("label",v,[(0,l._)("div",{class:"select-button",onDragover:t[0]||(t[0]=function(){return e.dragover&&e.dragover.apply(e,arguments)}),onDragleave:t[1]||(t[1]=function(){return e.dragleave&&e.dragleave.apply(e,arguments)}),onDrop:t[2]||(t[2]=function(){return e.drop&&e.drop.apply(e,arguments)})},[e.label?((0,l.wg)(),(0,l.iD)("span",O,(0,u.zw)(e.fileName?"":e.label),1)):((0,l.wg)(),(0,l.iD)("span",x,"Select File")),e.fileName?((0,l.wg)(),(0,l.iD)("div",k,"File selected: "+(0,u.zw)(e.fileName),1)):(0,l.kq)("",!0)],32),(0,l._)("input",{ref:"file",type:"file",accept:".zip",onChange:t[3]||(t[3]=function(){return e.handleFileChange&&e.handleFileChange.apply(e,arguments)})},null,544)]),(0,l.wy)((0,l._)("input",{class:(0,u.C_)(["url-input",{"url-invalid":!e.parsedURL&&""!=e.url,"url-valid":e.parsedURL||""==e.url}]),ref:"url_input",type:"url",placeholder:"type a URL","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.url=t}),onKeyup:t[5]||(t[5]=function(){return e.urlKeyup&&e.urlKeyup.apply(e,arguments)})},null,34),[[r.nr,e.url]])],64)}n(3948),n(285),n(1637),n(8309);var S=(0,l.aZ)({props:{label:{type:String,default:""}},emits:{"file-select":null},data:function(){return{fileName:"",url:""}},computed:{parsedURL:function(){try{return new URL(this.url)}catch(e){return null}}},methods:{handleFileChange:function(e){if(e.currentTarget){var t=e.currentTarget;if(!(null==t.files||t.files.length<1)){var n=t.files[0];this.$emit("file-select",n),this.url="",this.fileName=t.files[0].name}}},dragover:function(e){if(e.preventDefault(),e.currentTarget){var t=e.currentTarget;t.classList.contains("file-hover")||t.classList.add("file-hover")}},dragleave:function(e){if(e.currentTarget){var t=e.currentTarget;t.classList.remove("file-hover")}},drop:function(e){if(e.preventDefault(),e.currentTarget){var t=e.currentTarget;e.dataTransfer&&0!=e.dataTransfer.files.length&&(t.files=e.dataTransfer.files,this.handleFileChange(e),t.classList.remove("file-hover"))}},urlKeyup:function(e){if(console.log(this.url),"Enter"==e.key){var t=e.target;if(null==this.parsedURL)return void console.error("".concat(t.value," is an invalid URL"));this.$emit("file-select",this.parsedURL)}}}});const P=(0,d.Z)(S,[["render",_],["__scopeId","data-v-0630c5ec"]]);var I=P,E=function(e){return(0,l.dD)("data-v-05db67f2"),e=e(),(0,l.Cn)(),e},z=(0,l.Uk)("Export Metadata"),L={ref:"download"},T={key:1},j=E((function(){return(0,l._)("h3",null,"Partition List",-1)})),D={key:1,class:"signature"},A=E((function(){return(0,l._)("h3",null,"Metadata Signature",-1)})),B={style:{"white-space":"pre-wrap"}};function Z(e,t,n,r,a,o){var i=(0,l.up)("v-btn"),s=(0,l.up)("BasicInfo"),c=(0,l.up)("v-divider"),p=(0,l.up)("PartitionDetail"),f=(0,l.up)("v-card"),d=(0,l.up)("v-col"),h=(0,l.up)("v-row");return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.zipFile&&e.payload?((0,l.wg)(),(0,l.j4)(i,{key:0,class:"download-btn",onClick:e.exportOTAPackage},{default:(0,l.w5)((function(){return[z]})),_:1},8,["onClick"])):(0,l.kq)("",!0),(0,l._)("a",L,null,512),(0,l.Wm)(s,{zipFile:e.zipFile,payload:e.payload,class:"mb-5"},null,8,["zipFile","payload"]),(0,l.Wm)(c),e.payload?((0,l.wg)(),(0,l.iD)("div",T,[j,e.payload.manifest?((0,l.wg)(),(0,l.j4)(h,{key:0,class:"mb-5"},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.payload.manifest.partitions,(function(t){return(0,l.wg)(),(0,l.j4)(d,{key:t.partitionName,cols:"12",md:"4"},{default:(0,l.w5)((function(){return[(0,l.Wm)(f,{elevation:"5",hover:"",shaped:"",class:"partial-info"},{default:(0,l.w5)((function(){return[(0,l.Wm)(p,{partition:t,dynamicPartitionList:e.dynamicPartitions},null,8,["partition","dynamicPartitionList"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})):(0,l.kq)("",!0),(0,l.Wm)(c),e.payload.metadata_signature&&!e.payload.manifest.nonAB?((0,l.wg)(),(0,l.iD)("div",D,[A,(0,l._)("span",B,(0,u.zw)(e.octToHex(e.payload.metadata_signature.signatures[0].data)),1)])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)],64)}n(6535),n(9244);var C=function(e){return(0,l.dD)("data-v-6dba348a"),e=e(),(0,l.Cn)(),e},N={key:0},R={key:1},M=C((function(){return(0,l._)("strong",null," Estimate COW Size: ",-1)})),F={key:2},U=C((function(){return(0,l._)("strong",null," Postinstall Script: ",-1)})),V={class:"toggle"},H={key:0},W={key:0},q=C((function(){return(0,l._)("strong",null," Old Partition Size: ",-1)})),K={key:1},J=C((function(){return(0,l._)("strong",null," Old Partition Hash: ",-1)})),Y={class:"hex"},G=C((function(){return(0,l._)("strong",null," New Partition Size: ",-1)})),$={key:2},X=C((function(){return(0,l._)("strong",null," New Partition Hash: ",-1)})),Q={class:"hex"},ee={key:3},te=C((function(){return(0,l._)("strong",null," Version: ",-1)})),ne={key:4},re=C((function(){return(0,l._)("strong",null," Version: ",-1)})),ae={class:"toggle"},oe={key:0};function ie(e,t,n,r,a,o){var i=(0,l.up)("OperationDetail");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("h4",{class:(0,u.C_)({"new-partition":!e.partition.oldPartitionInfo})},(0,u.zw)(e.partition.partitionName),3),e.isDynamicPartition?((0,l.wg)(),(0,l.iD)("p",N," Dynamic: ✅ ")):(0,l.kq)("",!0),e.partition.estimateCowSize?((0,l.wg)(),(0,l.iD)("p",R,[M,(0,l.Uk)(" "+(0,u.zw)(e.partition.estimateCowSize)+" Bytes ",1)])):(0,l.kq)("",!0),e.partition.postinstallPath?((0,l.wg)(),(0,l.iD)("p",F,[U,(0,l.Uk)(" "+(0,u.zw)(e.partition.postinstallPath),1)])):(0,l.kq)("",!0),(0,l._)("div",V,[(0,l._)("h4",{onClick:t[0]||(t[0]=function(t){return e.toggle("showInfo")}),class:(0,u.C_)({active:e.showInfo,inactive:!e.showInfo})}," Partition Infos ",2),e.showInfo?((0,l.wg)(),(0,l.iD)("ul",H,[e.partition.oldPartitionInfo?((0,l.wg)(),(0,l.iD)("li",W,[q,(0,l.Uk)(" "+(0,u.zw)(e.partition.oldPartitionInfo.size)+" Bytes ",1)])):(0,l.kq)("",!0),e.partition.oldPartitionInfo?((0,l.wg)(),(0,l.iD)("li",K,[J,(0,l._)("div",Y,(0,u.zw)(e.octToHex(e.partition.oldPartitionInfo.hash,!1,16)),1)])):(0,l.kq)("",!0),(0,l._)("li",null,[G,(0,l.Uk)(" "+(0,u.zw)(e.partition.newPartitionInfo.size)+" Bytes ",1)]),e.partition.newPartitionInfo.hash?((0,l.wg)(),(0,l.iD)("li",$,[X,(0,l._)("div",Q,(0,u.zw)(e.octToHex(e.partition.newPartitionInfo.hash,!1,16)),1)])):(0,l.kq)("",!0),e.partition.version?((0,l.wg)(),(0,l.iD)("li",ee,[te,(0,l.Uk)(" "+(0,u.zw)(e.partition.version),1)])):(0,l.kq)("",!0),e.readableTimestamp?((0,l.wg)(),(0,l.iD)("li",ne,[re,(0,l.Uk)(" "+(0,u.zw)(e.readableTimestamp),1)])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)]),(0,l._)("div",ae,[(0,l._)("h4",{onClick:t[1]||(t[1]=function(t){return e.toggle("showOPs")}),class:(0,u.C_)({active:e.showOPs,inactive:!e.showOPs})}," Total Operations: "+(0,u.zw)(e.partition.operations.length),3),e.showOPs?((0,l.wg)(),(0,l.iD)("ul",oe,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.partition.operations,(function(t){return(0,l.wg)(),(0,l.iD)("li",{key:t.dataSha256Hash},[(0,l.Wm)(i,{operation:t,mapType:e.opType.mapType},null,8,["operation","mapType"])])})),128))])):(0,l.kq)("",!0)])],64)}n(9714);var se=n(4402),le=(n(7941),n(9653),n(3753),n(2100)),ue=le.Reader,ce=le.Writer,pe=le.util,fe=le.roots["default"]||(le.roots["default"]={}),de=fe.chromeos_update_engine=function(){var e={};return e.Extent=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.startBlock=pe.Long?pe.Long.fromBits(0,0,!0):0,e.prototype.numBlocks=pe.Long?pe.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=ce.create()),null!=e.startBlock&&Object.hasOwnProperty.call(e,"startBlock")&&t.uint32(8).uint64(e.startBlock),null!=e.numBlocks&&Object.hasOwnProperty.call(e,"numBlocks")&&t.uint32(16).uint64(e.numBlocks),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.Extent;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.startBlock=e.uint64();break;case 2:r.numBlocks=e.uint64();break;default:e.skipType(7&a);break}}return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(0,se.Z)(e)||null===e?"object expected":null==e.startBlock||!e.hasOwnProperty("startBlock")||pe.isInteger(e.startBlock)||e.startBlock&&pe.isInteger(e.startBlock.low)&&pe.isInteger(e.startBlock.high)?null==e.numBlocks||!e.hasOwnProperty("numBlocks")||pe.isInteger(e.numBlocks)||e.numBlocks&&pe.isInteger(e.numBlocks.low)&&pe.isInteger(e.numBlocks.high)?null:"numBlocks: integer|Long expected":"startBlock: integer|Long expected"},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.Extent)return e;var t=new fe.chromeos_update_engine.Extent;return null!=e.startBlock&&(pe.Long?(t.startBlock=pe.Long.fromValue(e.startBlock)).unsigned=!0:"string"===typeof e.startBlock?t.startBlock=parseInt(e.startBlock,10):"number"===typeof e.startBlock?t.startBlock=e.startBlock:"object"===(0,se.Z)(e.startBlock)&&(t.startBlock=new pe.LongBits(e.startBlock.low>>>0,e.startBlock.high>>>0).toNumber(!0))),null!=e.numBlocks&&(pe.Long?(t.numBlocks=pe.Long.fromValue(e.numBlocks)).unsigned=!0:"string"===typeof e.numBlocks?t.numBlocks=parseInt(e.numBlocks,10):"number"===typeof e.numBlocks?t.numBlocks=e.numBlocks:"object"===(0,se.Z)(e.numBlocks)&&(t.numBlocks=new pe.LongBits(e.numBlocks.low>>>0,e.numBlocks.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(pe.Long){var r=new pe.Long(0,0,!0);n.startBlock=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.startBlock=t.longs===String?"0":0;if(pe.Long){var a=new pe.Long(0,0,!0);n.numBlocks=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else n.numBlocks=t.longs===String?"0":0}return null!=e.startBlock&&e.hasOwnProperty("startBlock")&&("number"===typeof e.startBlock?n.startBlock=t.longs===String?String(e.startBlock):e.startBlock:n.startBlock=t.longs===String?pe.Long.prototype.toString.call(e.startBlock):t.longs===Number?new pe.LongBits(e.startBlock.low>>>0,e.startBlock.high>>>0).toNumber(!0):e.startBlock),null!=e.numBlocks&&e.hasOwnProperty("numBlocks")&&("number"===typeof e.numBlocks?n.numBlocks=t.longs===String?String(e.numBlocks):e.numBlocks:n.numBlocks=t.longs===String?pe.Long.prototype.toString.call(e.numBlocks):t.longs===Number?new pe.LongBits(e.numBlocks.low>>>0,e.numBlocks.high>>>0).toNumber(!0):e.numBlocks),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e}(),e.Signatures=function(){function e(e){if(this.signatures=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.signatures=pe.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=ce.create()),null!=e.signatures&&e.signatures.length)for(var n=0;n<e.signatures.length;++n)fe.chromeos_update_engine.Signatures.Signature.encode(e.signatures[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.Signatures;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.signatures&&r.signatures.length||(r.signatures=[]),r.signatures.push(fe.chromeos_update_engine.Signatures.Signature.decode(e,e.uint32()));break;default:e.skipType(7&a);break}}return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(0,se.Z)(e)||null===e)return"object expected";if(null!=e.signatures&&e.hasOwnProperty("signatures")){if(!Array.isArray(e.signatures))return"signatures: array expected";for(var t=0;t<e.signatures.length;++t){var n=fe.chromeos_update_engine.Signatures.Signature.verify(e.signatures[t]);if(n)return"signatures."+n}}return null},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.Signatures)return e;var t=new fe.chromeos_update_engine.Signatures;if(e.signatures){if(!Array.isArray(e.signatures))throw TypeError(".chromeos_update_engine.Signatures.signatures: array expected");t.signatures=[];for(var n=0;n<e.signatures.length;++n){if("object"!==(0,se.Z)(e.signatures[n]))throw TypeError(".chromeos_update_engine.Signatures.signatures: object expected");t.signatures[n]=fe.chromeos_update_engine.Signatures.Signature.fromObject(e.signatures[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.signatures=[]),e.signatures&&e.signatures.length){n.signatures=[];for(var r=0;r<e.signatures.length;++r)n.signatures[r]=fe.chromeos_update_engine.Signatures.Signature.toObject(e.signatures[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e.Signature=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.data=pe.newBuffer([]),e.prototype.unpaddedSignatureSize=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=ce.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).uint32(e.version),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),null!=e.unpaddedSignatureSize&&Object.hasOwnProperty.call(e,"unpaddedSignatureSize")&&t.uint32(29).fixed32(e.unpaddedSignatureSize),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.Signatures.Signature;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.version=e.uint32();break;case 2:r.data=e.bytes();break;case 3:r.unpaddedSignatureSize=e.fixed32();break;default:e.skipType(7&a);break}}return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(0,se.Z)(e)||null===e?"object expected":null!=e.version&&e.hasOwnProperty("version")&&!pe.isInteger(e.version)?"version: integer expected":null!=e.data&&e.hasOwnProperty("data")&&!(e.data&&"number"===typeof e.data.length||pe.isString(e.data))?"data: buffer expected":null!=e.unpaddedSignatureSize&&e.hasOwnProperty("unpaddedSignatureSize")&&!pe.isInteger(e.unpaddedSignatureSize)?"unpaddedSignatureSize: integer expected":null},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.Signatures.Signature)return e;var t=new fe.chromeos_update_engine.Signatures.Signature;return null!=e.version&&(t.version=e.version>>>0),null!=e.data&&("string"===typeof e.data?pe.base64.decode(e.data,t.data=pe.newBuffer(pe.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),null!=e.unpaddedSignatureSize&&(t.unpaddedSignatureSize=e.unpaddedSignatureSize>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.version=0,t.bytes===String?n.data="":(n.data=[],t.bytes!==Array&&(n.data=pe.newBuffer(n.data))),n.unpaddedSignatureSize=0),null!=e.version&&e.hasOwnProperty("version")&&(n.version=e.version),null!=e.data&&e.hasOwnProperty("data")&&(n.data=t.bytes===String?pe.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),null!=e.unpaddedSignatureSize&&e.hasOwnProperty("unpaddedSignatureSize")&&(n.unpaddedSignatureSize=e.unpaddedSignatureSize),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e}(),e}(),e.PartitionInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.size=pe.Long?pe.Long.fromBits(0,0,!0):0,e.prototype.hash=pe.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=ce.create()),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(8).uint64(e.size),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.PartitionInfo;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.size=e.uint64();break;case 2:r.hash=e.bytes();break;default:e.skipType(7&a);break}}return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(0,se.Z)(e)||null===e?"object expected":null==e.size||!e.hasOwnProperty("size")||pe.isInteger(e.size)||e.size&&pe.isInteger(e.size.low)&&pe.isInteger(e.size.high)?null!=e.hash&&e.hasOwnProperty("hash")&&!(e.hash&&"number"===typeof e.hash.length||pe.isString(e.hash))?"hash: buffer expected":null:"size: integer|Long expected"},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.PartitionInfo)return e;var t=new fe.chromeos_update_engine.PartitionInfo;return null!=e.size&&(pe.Long?(t.size=pe.Long.fromValue(e.size)).unsigned=!0:"string"===typeof e.size?t.size=parseInt(e.size,10):"number"===typeof e.size?t.size=e.size:"object"===(0,se.Z)(e.size)&&(t.size=new pe.LongBits(e.size.low>>>0,e.size.high>>>0).toNumber(!0))),null!=e.hash&&("string"===typeof e.hash?pe.base64.decode(e.hash,t.hash=pe.newBuffer(pe.base64.length(e.hash)),0):e.hash.length&&(t.hash=e.hash)),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(pe.Long){var r=new pe.Long(0,0,!0);n.size=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.size=t.longs===String?"0":0;t.bytes===String?n.hash="":(n.hash=[],t.bytes!==Array&&(n.hash=pe.newBuffer(n.hash)))}return null!=e.size&&e.hasOwnProperty("size")&&("number"===typeof e.size?n.size=t.longs===String?String(e.size):e.size:n.size=t.longs===String?pe.Long.prototype.toString.call(e.size):t.longs===Number?new pe.LongBits(e.size.low>>>0,e.size.high>>>0).toNumber(!0):e.size),null!=e.hash&&e.hasOwnProperty("hash")&&(n.hash=t.bytes===String?pe.base64.encode(e.hash,0,e.hash.length):t.bytes===Array?Array.prototype.slice.call(e.hash):e.hash),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e}(),e.ImageInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.board="",e.prototype.key="",e.prototype.channel="",e.prototype.version="",e.prototype.buildChannel="",e.prototype.buildVersion="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=ce.create()),null!=e.board&&Object.hasOwnProperty.call(e,"board")&&t.uint32(10).string(e.board),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(18).string(e.key),null!=e.channel&&Object.hasOwnProperty.call(e,"channel")&&t.uint32(26).string(e.channel),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(34).string(e.version),null!=e.buildChannel&&Object.hasOwnProperty.call(e,"buildChannel")&&t.uint32(42).string(e.buildChannel),null!=e.buildVersion&&Object.hasOwnProperty.call(e,"buildVersion")&&t.uint32(50).string(e.buildVersion),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.ImageInfo;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.board=e.string();break;case 2:r.key=e.string();break;case 3:r.channel=e.string();break;case 4:r.version=e.string();break;case 5:r.buildChannel=e.string();break;case 6:r.buildVersion=e.string();break;default:e.skipType(7&a);break}}return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(0,se.Z)(e)||null===e?"object expected":null!=e.board&&e.hasOwnProperty("board")&&!pe.isString(e.board)?"board: string expected":null!=e.key&&e.hasOwnProperty("key")&&!pe.isString(e.key)?"key: string expected":null!=e.channel&&e.hasOwnProperty("channel")&&!pe.isString(e.channel)?"channel: string expected":null!=e.version&&e.hasOwnProperty("version")&&!pe.isString(e.version)?"version: string expected":null!=e.buildChannel&&e.hasOwnProperty("buildChannel")&&!pe.isString(e.buildChannel)?"buildChannel: string expected":null!=e.buildVersion&&e.hasOwnProperty("buildVersion")&&!pe.isString(e.buildVersion)?"buildVersion: string expected":null},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.ImageInfo)return e;var t=new fe.chromeos_update_engine.ImageInfo;return null!=e.board&&(t.board=String(e.board)),null!=e.key&&(t.key=String(e.key)),null!=e.channel&&(t.channel=String(e.channel)),null!=e.version&&(t.version=String(e.version)),null!=e.buildChannel&&(t.buildChannel=String(e.buildChannel)),null!=e.buildVersion&&(t.buildVersion=String(e.buildVersion)),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.board="",n.key="",n.channel="",n.version="",n.buildChannel="",n.buildVersion=""),null!=e.board&&e.hasOwnProperty("board")&&(n.board=e.board),null!=e.key&&e.hasOwnProperty("key")&&(n.key=e.key),null!=e.channel&&e.hasOwnProperty("channel")&&(n.channel=e.channel),null!=e.version&&e.hasOwnProperty("version")&&(n.version=e.version),null!=e.buildChannel&&e.hasOwnProperty("buildChannel")&&(n.buildChannel=e.buildChannel),null!=e.buildVersion&&e.hasOwnProperty("buildVersion")&&(n.buildVersion=e.buildVersion),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e}(),e.InstallOperation=function(){function e(e){if(this.srcExtents=[],this.dstExtents=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=0,e.prototype.dataOffset=pe.Long?pe.Long.fromBits(0,0,!0):0,e.prototype.dataLength=pe.Long?pe.Long.fromBits(0,0,!0):0,e.prototype.srcExtents=pe.emptyArray,e.prototype.srcLength=pe.Long?pe.Long.fromBits(0,0,!0):0,e.prototype.dstExtents=pe.emptyArray,e.prototype.dstLength=pe.Long?pe.Long.fromBits(0,0,!0):0,e.prototype.dataSha256Hash=pe.newBuffer([]),e.prototype.srcSha256Hash=pe.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=ce.create()),t.uint32(8).int32(e.type),null!=e.dataOffset&&Object.hasOwnProperty.call(e,"dataOffset")&&t.uint32(16).uint64(e.dataOffset),null!=e.dataLength&&Object.hasOwnProperty.call(e,"dataLength")&&t.uint32(24).uint64(e.dataLength),null!=e.srcExtents&&e.srcExtents.length)for(var n=0;n<e.srcExtents.length;++n)fe.chromeos_update_engine.Extent.encode(e.srcExtents[n],t.uint32(34).fork()).ldelim();if(null!=e.srcLength&&Object.hasOwnProperty.call(e,"srcLength")&&t.uint32(40).uint64(e.srcLength),null!=e.dstExtents&&e.dstExtents.length)for(var r=0;r<e.dstExtents.length;++r)fe.chromeos_update_engine.Extent.encode(e.dstExtents[r],t.uint32(50).fork()).ldelim();return null!=e.dstLength&&Object.hasOwnProperty.call(e,"dstLength")&&t.uint32(56).uint64(e.dstLength),null!=e.dataSha256Hash&&Object.hasOwnProperty.call(e,"dataSha256Hash")&&t.uint32(66).bytes(e.dataSha256Hash),null!=e.srcSha256Hash&&Object.hasOwnProperty.call(e,"srcSha256Hash")&&t.uint32(74).bytes(e.srcSha256Hash),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.InstallOperation;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.type=e.int32();break;case 2:r.dataOffset=e.uint64();break;case 3:r.dataLength=e.uint64();break;case 4:r.srcExtents&&r.srcExtents.length||(r.srcExtents=[]),r.srcExtents.push(fe.chromeos_update_engine.Extent.decode(e,e.uint32()));break;case 5:r.srcLength=e.uint64();break;case 6:r.dstExtents&&r.dstExtents.length||(r.dstExtents=[]),r.dstExtents.push(fe.chromeos_update_engine.Extent.decode(e,e.uint32()));break;case 7:r.dstLength=e.uint64();break;case 8:r.dataSha256Hash=e.bytes();break;case 9:r.srcSha256Hash=e.bytes();break;default:e.skipType(7&a);break}}if(!r.hasOwnProperty("type"))throw pe.ProtocolError("missing required 'type'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(0,se.Z)(e)||null===e)return"object expected";switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 8:case 6:case 7:case 10:case 9:case 11:case 12:case 13:break}if(null!=e.dataOffset&&e.hasOwnProperty("dataOffset")&&!pe.isInteger(e.dataOffset)&&!(e.dataOffset&&pe.isInteger(e.dataOffset.low)&&pe.isInteger(e.dataOffset.high)))return"dataOffset: integer|Long expected";if(null!=e.dataLength&&e.hasOwnProperty("dataLength")&&!pe.isInteger(e.dataLength)&&!(e.dataLength&&pe.isInteger(e.dataLength.low)&&pe.isInteger(e.dataLength.high)))return"dataLength: integer|Long expected";if(null!=e.srcExtents&&e.hasOwnProperty("srcExtents")){if(!Array.isArray(e.srcExtents))return"srcExtents: array expected";for(var t=0;t<e.srcExtents.length;++t){var n=fe.chromeos_update_engine.Extent.verify(e.srcExtents[t]);if(n)return"srcExtents."+n}}if(null!=e.srcLength&&e.hasOwnProperty("srcLength")&&!pe.isInteger(e.srcLength)&&!(e.srcLength&&pe.isInteger(e.srcLength.low)&&pe.isInteger(e.srcLength.high)))return"srcLength: integer|Long expected";if(null!=e.dstExtents&&e.hasOwnProperty("dstExtents")){if(!Array.isArray(e.dstExtents))return"dstExtents: array expected";for(var r=0;r<e.dstExtents.length;++r){var a=fe.chromeos_update_engine.Extent.verify(e.dstExtents[r]);if(a)return"dstExtents."+a}}return null==e.dstLength||!e.hasOwnProperty("dstLength")||pe.isInteger(e.dstLength)||e.dstLength&&pe.isInteger(e.dstLength.low)&&pe.isInteger(e.dstLength.high)?null!=e.dataSha256Hash&&e.hasOwnProperty("dataSha256Hash")&&!(e.dataSha256Hash&&"number"===typeof e.dataSha256Hash.length||pe.isString(e.dataSha256Hash))?"dataSha256Hash: buffer expected":null!=e.srcSha256Hash&&e.hasOwnProperty("srcSha256Hash")&&!(e.srcSha256Hash&&"number"===typeof e.srcSha256Hash.length||pe.isString(e.srcSha256Hash))?"srcSha256Hash: buffer expected":null:"dstLength: integer|Long expected"},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.InstallOperation)return e;var t=new fe.chromeos_update_engine.InstallOperation;switch(e.type){case"REPLACE":case 0:t.type=0;break;case"REPLACE_BZ":case 1:t.type=1;break;case"MOVE":case 2:t.type=2;break;case"BSDIFF":case 3:t.type=3;break;case"SOURCE_COPY":case 4:t.type=4;break;case"SOURCE_BSDIFF":case 5:t.type=5;break;case"REPLACE_XZ":case 8:t.type=8;break;case"ZERO":case 6:t.type=6;break;case"DISCARD":case 7:t.type=7;break;case"BROTLI_BSDIFF":case 10:t.type=10;break;case"PUFFDIFF":case 9:t.type=9;break;case"ZUCCHINI":case 11:t.type=11;break;case"LZ4DIFF_BSDIFF":case 12:t.type=12;break;case"LZ4DIFF_PUFFDIFF":case 13:t.type=13;break}if(null!=e.dataOffset&&(pe.Long?(t.dataOffset=pe.Long.fromValue(e.dataOffset)).unsigned=!0:"string"===typeof e.dataOffset?t.dataOffset=parseInt(e.dataOffset,10):"number"===typeof e.dataOffset?t.dataOffset=e.dataOffset:"object"===(0,se.Z)(e.dataOffset)&&(t.dataOffset=new pe.LongBits(e.dataOffset.low>>>0,e.dataOffset.high>>>0).toNumber(!0))),null!=e.dataLength&&(pe.Long?(t.dataLength=pe.Long.fromValue(e.dataLength)).unsigned=!0:"string"===typeof e.dataLength?t.dataLength=parseInt(e.dataLength,10):"number"===typeof e.dataLength?t.dataLength=e.dataLength:"object"===(0,se.Z)(e.dataLength)&&(t.dataLength=new pe.LongBits(e.dataLength.low>>>0,e.dataLength.high>>>0).toNumber(!0))),e.srcExtents){if(!Array.isArray(e.srcExtents))throw TypeError(".chromeos_update_engine.InstallOperation.srcExtents: array expected");t.srcExtents=[];for(var n=0;n<e.srcExtents.length;++n){if("object"!==(0,se.Z)(e.srcExtents[n]))throw TypeError(".chromeos_update_engine.InstallOperation.srcExtents: object expected");t.srcExtents[n]=fe.chromeos_update_engine.Extent.fromObject(e.srcExtents[n])}}if(null!=e.srcLength&&(pe.Long?(t.srcLength=pe.Long.fromValue(e.srcLength)).unsigned=!0:"string"===typeof e.srcLength?t.srcLength=parseInt(e.srcLength,10):"number"===typeof e.srcLength?t.srcLength=e.srcLength:"object"===(0,se.Z)(e.srcLength)&&(t.srcLength=new pe.LongBits(e.srcLength.low>>>0,e.srcLength.high>>>0).toNumber(!0))),e.dstExtents){if(!Array.isArray(e.dstExtents))throw TypeError(".chromeos_update_engine.InstallOperation.dstExtents: array expected");t.dstExtents=[];for(var r=0;r<e.dstExtents.length;++r){if("object"!==(0,se.Z)(e.dstExtents[r]))throw TypeError(".chromeos_update_engine.InstallOperation.dstExtents: object expected");t.dstExtents[r]=fe.chromeos_update_engine.Extent.fromObject(e.dstExtents[r])}}return null!=e.dstLength&&(pe.Long?(t.dstLength=pe.Long.fromValue(e.dstLength)).unsigned=!0:"string"===typeof e.dstLength?t.dstLength=parseInt(e.dstLength,10):"number"===typeof e.dstLength?t.dstLength=e.dstLength:"object"===(0,se.Z)(e.dstLength)&&(t.dstLength=new pe.LongBits(e.dstLength.low>>>0,e.dstLength.high>>>0).toNumber(!0))),null!=e.dataSha256Hash&&("string"===typeof e.dataSha256Hash?pe.base64.decode(e.dataSha256Hash,t.dataSha256Hash=pe.newBuffer(pe.base64.length(e.dataSha256Hash)),0):e.dataSha256Hash.length&&(t.dataSha256Hash=e.dataSha256Hash)),null!=e.srcSha256Hash&&("string"===typeof e.srcSha256Hash?pe.base64.decode(e.srcSha256Hash,t.srcSha256Hash=pe.newBuffer(pe.base64.length(e.srcSha256Hash)),0):e.srcSha256Hash.length&&(t.srcSha256Hash=e.srcSha256Hash)),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.srcExtents=[],n.dstExtents=[]),t.defaults){if(n.type=t.enums===String?"REPLACE":0,pe.Long){var r=new pe.Long(0,0,!0);n.dataOffset=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.dataOffset=t.longs===String?"0":0;if(pe.Long){var a=new pe.Long(0,0,!0);n.dataLength=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else n.dataLength=t.longs===String?"0":0;if(pe.Long){var o=new pe.Long(0,0,!0);n.srcLength=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.srcLength=t.longs===String?"0":0;if(pe.Long){var i=new pe.Long(0,0,!0);n.dstLength=t.longs===String?i.toString():t.longs===Number?i.toNumber():i}else n.dstLength=t.longs===String?"0":0;t.bytes===String?n.dataSha256Hash="":(n.dataSha256Hash=[],t.bytes!==Array&&(n.dataSha256Hash=pe.newBuffer(n.dataSha256Hash))),t.bytes===String?n.srcSha256Hash="":(n.srcSha256Hash=[],t.bytes!==Array&&(n.srcSha256Hash=pe.newBuffer(n.srcSha256Hash)))}if(null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?fe.chromeos_update_engine.InstallOperation.Type[e.type]:e.type),null!=e.dataOffset&&e.hasOwnProperty("dataOffset")&&("number"===typeof e.dataOffset?n.dataOffset=t.longs===String?String(e.dataOffset):e.dataOffset:n.dataOffset=t.longs===String?pe.Long.prototype.toString.call(e.dataOffset):t.longs===Number?new pe.LongBits(e.dataOffset.low>>>0,e.dataOffset.high>>>0).toNumber(!0):e.dataOffset),null!=e.dataLength&&e.hasOwnProperty("dataLength")&&("number"===typeof e.dataLength?n.dataLength=t.longs===String?String(e.dataLength):e.dataLength:n.dataLength=t.longs===String?pe.Long.prototype.toString.call(e.dataLength):t.longs===Number?new pe.LongBits(e.dataLength.low>>>0,e.dataLength.high>>>0).toNumber(!0):e.dataLength),e.srcExtents&&e.srcExtents.length){n.srcExtents=[];for(var s=0;s<e.srcExtents.length;++s)n.srcExtents[s]=fe.chromeos_update_engine.Extent.toObject(e.srcExtents[s],t)}if(null!=e.srcLength&&e.hasOwnProperty("srcLength")&&("number"===typeof e.srcLength?n.srcLength=t.longs===String?String(e.srcLength):e.srcLength:n.srcLength=t.longs===String?pe.Long.prototype.toString.call(e.srcLength):t.longs===Number?new pe.LongBits(e.srcLength.low>>>0,e.srcLength.high>>>0).toNumber(!0):e.srcLength),e.dstExtents&&e.dstExtents.length){n.dstExtents=[];for(var l=0;l<e.dstExtents.length;++l)n.dstExtents[l]=fe.chromeos_update_engine.Extent.toObject(e.dstExtents[l],t)}return null!=e.dstLength&&e.hasOwnProperty("dstLength")&&("number"===typeof e.dstLength?n.dstLength=t.longs===String?String(e.dstLength):e.dstLength:n.dstLength=t.longs===String?pe.Long.prototype.toString.call(e.dstLength):t.longs===Number?new pe.LongBits(e.dstLength.low>>>0,e.dstLength.high>>>0).toNumber(!0):e.dstLength),null!=e.dataSha256Hash&&e.hasOwnProperty("dataSha256Hash")&&(n.dataSha256Hash=t.bytes===String?pe.base64.encode(e.dataSha256Hash,0,e.dataSha256Hash.length):t.bytes===Array?Array.prototype.slice.call(e.dataSha256Hash):e.dataSha256Hash),null!=e.srcSha256Hash&&e.hasOwnProperty("srcSha256Hash")&&(n.srcSha256Hash=t.bytes===String?pe.base64.encode(e.srcSha256Hash,0,e.srcSha256Hash.length):t.bytes===Array?Array.prototype.slice.call(e.srcSha256Hash):e.srcSha256Hash),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e.Type=function(){var e={},t=Object.create(e);return t[e[0]="REPLACE"]=0,t[e[1]="REPLACE_BZ"]=1,t[e[2]="MOVE"]=2,t[e[3]="BSDIFF"]=3,t[e[4]="SOURCE_COPY"]=4,t[e[5]="SOURCE_BSDIFF"]=5,t[e[8]="REPLACE_XZ"]=8,t[e[6]="ZERO"]=6,t[e[7]="DISCARD"]=7,t[e[10]="BROTLI_BSDIFF"]=10,t[e[9]="PUFFDIFF"]=9,t[e[11]="ZUCCHINI"]=11,t[e[12]="LZ4DIFF_BSDIFF"]=12,t[e[13]="LZ4DIFF_PUFFDIFF"]=13,t}(),e}(),e.CowMergeOperation=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.type=0,e.prototype.srcExtent=null,e.prototype.dstExtent=null,e.prototype.srcOffset=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=ce.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.srcExtent&&Object.hasOwnProperty.call(e,"srcExtent")&&fe.chromeos_update_engine.Extent.encode(e.srcExtent,t.uint32(18).fork()).ldelim(),null!=e.dstExtent&&Object.hasOwnProperty.call(e,"dstExtent")&&fe.chromeos_update_engine.Extent.encode(e.dstExtent,t.uint32(26).fork()).ldelim(),null!=e.srcOffset&&Object.hasOwnProperty.call(e,"srcOffset")&&t.uint32(32).uint32(e.srcOffset),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.CowMergeOperation;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.type=e.int32();break;case 2:r.srcExtent=fe.chromeos_update_engine.Extent.decode(e,e.uint32());break;case 3:r.dstExtent=fe.chromeos_update_engine.Extent.decode(e,e.uint32());break;case 4:r.srcOffset=e.uint32();break;default:e.skipType(7&a);break}}return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(0,se.Z)(e)||null===e)return"object expected";if(null!=e.type&&e.hasOwnProperty("type"))switch(e.type){default:return"type: enum value expected";case 0:case 1:case 2:break}if(null!=e.srcExtent&&e.hasOwnProperty("srcExtent")){var t=fe.chromeos_update_engine.Extent.verify(e.srcExtent);if(t)return"srcExtent."+t}if(null!=e.dstExtent&&e.hasOwnProperty("dstExtent")){var n=fe.chromeos_update_engine.Extent.verify(e.dstExtent);if(n)return"dstExtent."+n}return null!=e.srcOffset&&e.hasOwnProperty("srcOffset")&&!pe.isInteger(e.srcOffset)?"srcOffset: integer expected":null},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.CowMergeOperation)return e;var t=new fe.chromeos_update_engine.CowMergeOperation;switch(e.type){case"COW_COPY":case 0:t.type=0;break;case"COW_XOR":case 1:t.type=1;break;case"COW_REPLACE":case 2:t.type=2;break}if(null!=e.srcExtent){if("object"!==(0,se.Z)(e.srcExtent))throw TypeError(".chromeos_update_engine.CowMergeOperation.srcExtent: object expected");t.srcExtent=fe.chromeos_update_engine.Extent.fromObject(e.srcExtent)}if(null!=e.dstExtent){if("object"!==(0,se.Z)(e.dstExtent))throw TypeError(".chromeos_update_engine.CowMergeOperation.dstExtent: object expected");t.dstExtent=fe.chromeos_update_engine.Extent.fromObject(e.dstExtent)}return null!=e.srcOffset&&(t.srcOffset=e.srcOffset>>>0),t},e.toObject=function(e,t){t||(t={});var n={};return t.defaults&&(n.type=t.enums===String?"COW_COPY":0,n.srcExtent=null,n.dstExtent=null,n.srcOffset=0),null!=e.type&&e.hasOwnProperty("type")&&(n.type=t.enums===String?fe.chromeos_update_engine.CowMergeOperation.Type[e.type]:e.type),null!=e.srcExtent&&e.hasOwnProperty("srcExtent")&&(n.srcExtent=fe.chromeos_update_engine.Extent.toObject(e.srcExtent,t)),null!=e.dstExtent&&e.hasOwnProperty("dstExtent")&&(n.dstExtent=fe.chromeos_update_engine.Extent.toObject(e.dstExtent,t)),null!=e.srcOffset&&e.hasOwnProperty("srcOffset")&&(n.srcOffset=e.srcOffset),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e.Type=function(){var e={},t=Object.create(e);return t[e[0]="COW_COPY"]=0,t[e[1]="COW_XOR"]=1,t[e[2]="COW_REPLACE"]=2,t}(),e}(),e.PartitionUpdate=function(){function e(e){if(this.newPartitionSignature=[],this.operations=[],this.mergeOperations=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.partitionName="",e.prototype.runPostinstall=!1,e.prototype.postinstallPath="",e.prototype.filesystemType="",e.prototype.newPartitionSignature=pe.emptyArray,e.prototype.oldPartitionInfo=null,e.prototype.newPartitionInfo=null,e.prototype.operations=pe.emptyArray,e.prototype.postinstallOptional=!1,e.prototype.hashTreeDataExtent=null,e.prototype.hashTreeExtent=null,e.prototype.hashTreeAlgorithm="",e.prototype.hashTreeSalt=pe.newBuffer([]),e.prototype.fecDataExtent=null,e.prototype.fecExtent=null,e.prototype.fecRoots=2,e.prototype.version="",e.prototype.mergeOperations=pe.emptyArray,e.prototype.estimateCowSize=pe.Long?pe.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=ce.create()),t.uint32(10).string(e.partitionName),null!=e.runPostinstall&&Object.hasOwnProperty.call(e,"runPostinstall")&&t.uint32(16).bool(e.runPostinstall),null!=e.postinstallPath&&Object.hasOwnProperty.call(e,"postinstallPath")&&t.uint32(26).string(e.postinstallPath),null!=e.filesystemType&&Object.hasOwnProperty.call(e,"filesystemType")&&t.uint32(34).string(e.filesystemType),null!=e.newPartitionSignature&&e.newPartitionSignature.length)for(var n=0;n<e.newPartitionSignature.length;++n)fe.chromeos_update_engine.Signatures.Signature.encode(e.newPartitionSignature[n],t.uint32(42).fork()).ldelim();if(null!=e.oldPartitionInfo&&Object.hasOwnProperty.call(e,"oldPartitionInfo")&&fe.chromeos_update_engine.PartitionInfo.encode(e.oldPartitionInfo,t.uint32(50).fork()).ldelim(),null!=e.newPartitionInfo&&Object.hasOwnProperty.call(e,"newPartitionInfo")&&fe.chromeos_update_engine.PartitionInfo.encode(e.newPartitionInfo,t.uint32(58).fork()).ldelim(),null!=e.operations&&e.operations.length)for(var r=0;r<e.operations.length;++r)fe.chromeos_update_engine.InstallOperation.encode(e.operations[r],t.uint32(66).fork()).ldelim();if(null!=e.postinstallOptional&&Object.hasOwnProperty.call(e,"postinstallOptional")&&t.uint32(72).bool(e.postinstallOptional),null!=e.hashTreeDataExtent&&Object.hasOwnProperty.call(e,"hashTreeDataExtent")&&fe.chromeos_update_engine.Extent.encode(e.hashTreeDataExtent,t.uint32(82).fork()).ldelim(),null!=e.hashTreeExtent&&Object.hasOwnProperty.call(e,"hashTreeExtent")&&fe.chromeos_update_engine.Extent.encode(e.hashTreeExtent,t.uint32(90).fork()).ldelim(),null!=e.hashTreeAlgorithm&&Object.hasOwnProperty.call(e,"hashTreeAlgorithm")&&t.uint32(98).string(e.hashTreeAlgorithm),null!=e.hashTreeSalt&&Object.hasOwnProperty.call(e,"hashTreeSalt")&&t.uint32(106).bytes(e.hashTreeSalt),null!=e.fecDataExtent&&Object.hasOwnProperty.call(e,"fecDataExtent")&&fe.chromeos_update_engine.Extent.encode(e.fecDataExtent,t.uint32(114).fork()).ldelim(),null!=e.fecExtent&&Object.hasOwnProperty.call(e,"fecExtent")&&fe.chromeos_update_engine.Extent.encode(e.fecExtent,t.uint32(122).fork()).ldelim(),null!=e.fecRoots&&Object.hasOwnProperty.call(e,"fecRoots")&&t.uint32(128).uint32(e.fecRoots),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(138).string(e.version),null!=e.mergeOperations&&e.mergeOperations.length)for(var a=0;a<e.mergeOperations.length;++a)fe.chromeos_update_engine.CowMergeOperation.encode(e.mergeOperations[a],t.uint32(146).fork()).ldelim();return null!=e.estimateCowSize&&Object.hasOwnProperty.call(e,"estimateCowSize")&&t.uint32(152).uint64(e.estimateCowSize),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.PartitionUpdate;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.partitionName=e.string();break;case 2:r.runPostinstall=e.bool();break;case 3:r.postinstallPath=e.string();break;case 4:r.filesystemType=e.string();break;case 5:r.newPartitionSignature&&r.newPartitionSignature.length||(r.newPartitionSignature=[]),r.newPartitionSignature.push(fe.chromeos_update_engine.Signatures.Signature.decode(e,e.uint32()));break;case 6:r.oldPartitionInfo=fe.chromeos_update_engine.PartitionInfo.decode(e,e.uint32());break;case 7:r.newPartitionInfo=fe.chromeos_update_engine.PartitionInfo.decode(e,e.uint32());break;case 8:r.operations&&r.operations.length||(r.operations=[]),r.operations.push(fe.chromeos_update_engine.InstallOperation.decode(e,e.uint32()));break;case 9:r.postinstallOptional=e.bool();break;case 10:r.hashTreeDataExtent=fe.chromeos_update_engine.Extent.decode(e,e.uint32());break;case 11:r.hashTreeExtent=fe.chromeos_update_engine.Extent.decode(e,e.uint32());break;case 12:r.hashTreeAlgorithm=e.string();break;case 13:r.hashTreeSalt=e.bytes();break;case 14:r.fecDataExtent=fe.chromeos_update_engine.Extent.decode(e,e.uint32());break;case 15:r.fecExtent=fe.chromeos_update_engine.Extent.decode(e,e.uint32());break;case 16:r.fecRoots=e.uint32();break;case 17:r.version=e.string();break;case 18:r.mergeOperations&&r.mergeOperations.length||(r.mergeOperations=[]),r.mergeOperations.push(fe.chromeos_update_engine.CowMergeOperation.decode(e,e.uint32()));break;case 19:r.estimateCowSize=e.uint64();break;default:e.skipType(7&a);break}}if(!r.hasOwnProperty("partitionName"))throw pe.ProtocolError("missing required 'partitionName'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(0,se.Z)(e)||null===e)return"object expected";if(!pe.isString(e.partitionName))return"partitionName: string expected";if(null!=e.runPostinstall&&e.hasOwnProperty("runPostinstall")&&"boolean"!==typeof e.runPostinstall)return"runPostinstall: boolean expected";if(null!=e.postinstallPath&&e.hasOwnProperty("postinstallPath")&&!pe.isString(e.postinstallPath))return"postinstallPath: string expected";if(null!=e.filesystemType&&e.hasOwnProperty("filesystemType")&&!pe.isString(e.filesystemType))return"filesystemType: string expected";if(null!=e.newPartitionSignature&&e.hasOwnProperty("newPartitionSignature")){if(!Array.isArray(e.newPartitionSignature))return"newPartitionSignature: array expected";for(var t=0;t<e.newPartitionSignature.length;++t){var n=fe.chromeos_update_engine.Signatures.Signature.verify(e.newPartitionSignature[t]);if(n)return"newPartitionSignature."+n}}if(null!=e.oldPartitionInfo&&e.hasOwnProperty("oldPartitionInfo")){var r=fe.chromeos_update_engine.PartitionInfo.verify(e.oldPartitionInfo);if(r)return"oldPartitionInfo."+r}if(null!=e.newPartitionInfo&&e.hasOwnProperty("newPartitionInfo")){var a=fe.chromeos_update_engine.PartitionInfo.verify(e.newPartitionInfo);if(a)return"newPartitionInfo."+a}if(null!=e.operations&&e.hasOwnProperty("operations")){if(!Array.isArray(e.operations))return"operations: array expected";for(var o=0;o<e.operations.length;++o){var i=fe.chromeos_update_engine.InstallOperation.verify(e.operations[o]);if(i)return"operations."+i}}if(null!=e.postinstallOptional&&e.hasOwnProperty("postinstallOptional")&&"boolean"!==typeof e.postinstallOptional)return"postinstallOptional: boolean expected";if(null!=e.hashTreeDataExtent&&e.hasOwnProperty("hashTreeDataExtent")){var s=fe.chromeos_update_engine.Extent.verify(e.hashTreeDataExtent);if(s)return"hashTreeDataExtent."+s}if(null!=e.hashTreeExtent&&e.hasOwnProperty("hashTreeExtent")){var l=fe.chromeos_update_engine.Extent.verify(e.hashTreeExtent);if(l)return"hashTreeExtent."+l}if(null!=e.hashTreeAlgorithm&&e.hasOwnProperty("hashTreeAlgorithm")&&!pe.isString(e.hashTreeAlgorithm))return"hashTreeAlgorithm: string expected";if(null!=e.hashTreeSalt&&e.hasOwnProperty("hashTreeSalt")&&!(e.hashTreeSalt&&"number"===typeof e.hashTreeSalt.length||pe.isString(e.hashTreeSalt)))return"hashTreeSalt: buffer expected";if(null!=e.fecDataExtent&&e.hasOwnProperty("fecDataExtent")){var u=fe.chromeos_update_engine.Extent.verify(e.fecDataExtent);if(u)return"fecDataExtent."+u}if(null!=e.fecExtent&&e.hasOwnProperty("fecExtent")){var c=fe.chromeos_update_engine.Extent.verify(e.fecExtent);if(c)return"fecExtent."+c}if(null!=e.fecRoots&&e.hasOwnProperty("fecRoots")&&!pe.isInteger(e.fecRoots))return"fecRoots: integer expected";if(null!=e.version&&e.hasOwnProperty("version")&&!pe.isString(e.version))return"version: string expected";if(null!=e.mergeOperations&&e.hasOwnProperty("mergeOperations")){if(!Array.isArray(e.mergeOperations))return"mergeOperations: array expected";for(var p=0;p<e.mergeOperations.length;++p){var f=fe.chromeos_update_engine.CowMergeOperation.verify(e.mergeOperations[p]);if(f)return"mergeOperations."+f}}return null==e.estimateCowSize||!e.hasOwnProperty("estimateCowSize")||pe.isInteger(e.estimateCowSize)||e.estimateCowSize&&pe.isInteger(e.estimateCowSize.low)&&pe.isInteger(e.estimateCowSize.high)?null:"estimateCowSize: integer|Long expected"},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.PartitionUpdate)return e;var t=new fe.chromeos_update_engine.PartitionUpdate;if(null!=e.partitionName&&(t.partitionName=String(e.partitionName)),null!=e.runPostinstall&&(t.runPostinstall=Boolean(e.runPostinstall)),null!=e.postinstallPath&&(t.postinstallPath=String(e.postinstallPath)),null!=e.filesystemType&&(t.filesystemType=String(e.filesystemType)),e.newPartitionSignature){if(!Array.isArray(e.newPartitionSignature))throw TypeError(".chromeos_update_engine.PartitionUpdate.newPartitionSignature: array expected");t.newPartitionSignature=[];for(var n=0;n<e.newPartitionSignature.length;++n){if("object"!==(0,se.Z)(e.newPartitionSignature[n]))throw TypeError(".chromeos_update_engine.PartitionUpdate.newPartitionSignature: object expected");t.newPartitionSignature[n]=fe.chromeos_update_engine.Signatures.Signature.fromObject(e.newPartitionSignature[n])}}if(null!=e.oldPartitionInfo){if("object"!==(0,se.Z)(e.oldPartitionInfo))throw TypeError(".chromeos_update_engine.PartitionUpdate.oldPartitionInfo: object expected");t.oldPartitionInfo=fe.chromeos_update_engine.PartitionInfo.fromObject(e.oldPartitionInfo)}if(null!=e.newPartitionInfo){if("object"!==(0,se.Z)(e.newPartitionInfo))throw TypeError(".chromeos_update_engine.PartitionUpdate.newPartitionInfo: object expected");t.newPartitionInfo=fe.chromeos_update_engine.PartitionInfo.fromObject(e.newPartitionInfo)}if(e.operations){if(!Array.isArray(e.operations))throw TypeError(".chromeos_update_engine.PartitionUpdate.operations: array expected");t.operations=[];for(var r=0;r<e.operations.length;++r){if("object"!==(0,se.Z)(e.operations[r]))throw TypeError(".chromeos_update_engine.PartitionUpdate.operations: object expected");t.operations[r]=fe.chromeos_update_engine.InstallOperation.fromObject(e.operations[r])}}if(null!=e.postinstallOptional&&(t.postinstallOptional=Boolean(e.postinstallOptional)),null!=e.hashTreeDataExtent){if("object"!==(0,se.Z)(e.hashTreeDataExtent))throw TypeError(".chromeos_update_engine.PartitionUpdate.hashTreeDataExtent: object expected");t.hashTreeDataExtent=fe.chromeos_update_engine.Extent.fromObject(e.hashTreeDataExtent)}if(null!=e.hashTreeExtent){if("object"!==(0,se.Z)(e.hashTreeExtent))throw TypeError(".chromeos_update_engine.PartitionUpdate.hashTreeExtent: object expected");t.hashTreeExtent=fe.chromeos_update_engine.Extent.fromObject(e.hashTreeExtent)}if(null!=e.hashTreeAlgorithm&&(t.hashTreeAlgorithm=String(e.hashTreeAlgorithm)),null!=e.hashTreeSalt&&("string"===typeof e.hashTreeSalt?pe.base64.decode(e.hashTreeSalt,t.hashTreeSalt=pe.newBuffer(pe.base64.length(e.hashTreeSalt)),0):e.hashTreeSalt.length&&(t.hashTreeSalt=e.hashTreeSalt)),null!=e.fecDataExtent){if("object"!==(0,se.Z)(e.fecDataExtent))throw TypeError(".chromeos_update_engine.PartitionUpdate.fecDataExtent: object expected");t.fecDataExtent=fe.chromeos_update_engine.Extent.fromObject(e.fecDataExtent)}if(null!=e.fecExtent){if("object"!==(0,se.Z)(e.fecExtent))throw TypeError(".chromeos_update_engine.PartitionUpdate.fecExtent: object expected");t.fecExtent=fe.chromeos_update_engine.Extent.fromObject(e.fecExtent)}if(null!=e.fecRoots&&(t.fecRoots=e.fecRoots>>>0),null!=e.version&&(t.version=String(e.version)),e.mergeOperations){if(!Array.isArray(e.mergeOperations))throw TypeError(".chromeos_update_engine.PartitionUpdate.mergeOperations: array expected");t.mergeOperations=[];for(var a=0;a<e.mergeOperations.length;++a){if("object"!==(0,se.Z)(e.mergeOperations[a]))throw TypeError(".chromeos_update_engine.PartitionUpdate.mergeOperations: object expected");t.mergeOperations[a]=fe.chromeos_update_engine.CowMergeOperation.fromObject(e.mergeOperations[a])}}return null!=e.estimateCowSize&&(pe.Long?(t.estimateCowSize=pe.Long.fromValue(e.estimateCowSize)).unsigned=!0:"string"===typeof e.estimateCowSize?t.estimateCowSize=parseInt(e.estimateCowSize,10):"number"===typeof e.estimateCowSize?t.estimateCowSize=e.estimateCowSize:"object"===(0,se.Z)(e.estimateCowSize)&&(t.estimateCowSize=new pe.LongBits(e.estimateCowSize.low>>>0,e.estimateCowSize.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.newPartitionSignature=[],n.operations=[],n.mergeOperations=[]),t.defaults)if(n.partitionName="",n.runPostinstall=!1,n.postinstallPath="",n.filesystemType="",n.oldPartitionInfo=null,n.newPartitionInfo=null,n.postinstallOptional=!1,n.hashTreeDataExtent=null,n.hashTreeExtent=null,n.hashTreeAlgorithm="",t.bytes===String?n.hashTreeSalt="":(n.hashTreeSalt=[],t.bytes!==Array&&(n.hashTreeSalt=pe.newBuffer(n.hashTreeSalt))),n.fecDataExtent=null,n.fecExtent=null,n.fecRoots=2,n.version="",pe.Long){var r=new pe.Long(0,0,!0);n.estimateCowSize=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.estimateCowSize=t.longs===String?"0":0;if(null!=e.partitionName&&e.hasOwnProperty("partitionName")&&(n.partitionName=e.partitionName),null!=e.runPostinstall&&e.hasOwnProperty("runPostinstall")&&(n.runPostinstall=e.runPostinstall),null!=e.postinstallPath&&e.hasOwnProperty("postinstallPath")&&(n.postinstallPath=e.postinstallPath),null!=e.filesystemType&&e.hasOwnProperty("filesystemType")&&(n.filesystemType=e.filesystemType),e.newPartitionSignature&&e.newPartitionSignature.length){n.newPartitionSignature=[];for(var a=0;a<e.newPartitionSignature.length;++a)n.newPartitionSignature[a]=fe.chromeos_update_engine.Signatures.Signature.toObject(e.newPartitionSignature[a],t)}if(null!=e.oldPartitionInfo&&e.hasOwnProperty("oldPartitionInfo")&&(n.oldPartitionInfo=fe.chromeos_update_engine.PartitionInfo.toObject(e.oldPartitionInfo,t)),null!=e.newPartitionInfo&&e.hasOwnProperty("newPartitionInfo")&&(n.newPartitionInfo=fe.chromeos_update_engine.PartitionInfo.toObject(e.newPartitionInfo,t)),e.operations&&e.operations.length){n.operations=[];for(var o=0;o<e.operations.length;++o)n.operations[o]=fe.chromeos_update_engine.InstallOperation.toObject(e.operations[o],t)}if(null!=e.postinstallOptional&&e.hasOwnProperty("postinstallOptional")&&(n.postinstallOptional=e.postinstallOptional),null!=e.hashTreeDataExtent&&e.hasOwnProperty("hashTreeDataExtent")&&(n.hashTreeDataExtent=fe.chromeos_update_engine.Extent.toObject(e.hashTreeDataExtent,t)),null!=e.hashTreeExtent&&e.hasOwnProperty("hashTreeExtent")&&(n.hashTreeExtent=fe.chromeos_update_engine.Extent.toObject(e.hashTreeExtent,t)),null!=e.hashTreeAlgorithm&&e.hasOwnProperty("hashTreeAlgorithm")&&(n.hashTreeAlgorithm=e.hashTreeAlgorithm),null!=e.hashTreeSalt&&e.hasOwnProperty("hashTreeSalt")&&(n.hashTreeSalt=t.bytes===String?pe.base64.encode(e.hashTreeSalt,0,e.hashTreeSalt.length):t.bytes===Array?Array.prototype.slice.call(e.hashTreeSalt):e.hashTreeSalt),null!=e.fecDataExtent&&e.hasOwnProperty("fecDataExtent")&&(n.fecDataExtent=fe.chromeos_update_engine.Extent.toObject(e.fecDataExtent,t)),null!=e.fecExtent&&e.hasOwnProperty("fecExtent")&&(n.fecExtent=fe.chromeos_update_engine.Extent.toObject(e.fecExtent,t)),null!=e.fecRoots&&e.hasOwnProperty("fecRoots")&&(n.fecRoots=e.fecRoots),null!=e.version&&e.hasOwnProperty("version")&&(n.version=e.version),e.mergeOperations&&e.mergeOperations.length){n.mergeOperations=[];for(var i=0;i<e.mergeOperations.length;++i)n.mergeOperations[i]=fe.chromeos_update_engine.CowMergeOperation.toObject(e.mergeOperations[i],t)}return null!=e.estimateCowSize&&e.hasOwnProperty("estimateCowSize")&&("number"===typeof e.estimateCowSize?n.estimateCowSize=t.longs===String?String(e.estimateCowSize):e.estimateCowSize:n.estimateCowSize=t.longs===String?pe.Long.prototype.toString.call(e.estimateCowSize):t.longs===Number?new pe.LongBits(e.estimateCowSize.low>>>0,e.estimateCowSize.high>>>0).toNumber(!0):e.estimateCowSize),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e}(),e.DynamicPartitionGroup=function(){function e(e){if(this.partitionNames=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.size=pe.Long?pe.Long.fromBits(0,0,!0):0,e.prototype.partitionNames=pe.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=ce.create()),t.uint32(10).string(e.name),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(16).uint64(e.size),null!=e.partitionNames&&e.partitionNames.length)for(var n=0;n<e.partitionNames.length;++n)t.uint32(26).string(e.partitionNames[n]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.DynamicPartitionGroup;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.name=e.string();break;case 2:r.size=e.uint64();break;case 3:r.partitionNames&&r.partitionNames.length||(r.partitionNames=[]),r.partitionNames.push(e.string());break;default:e.skipType(7&a);break}}if(!r.hasOwnProperty("name"))throw pe.ProtocolError("missing required 'name'",{instance:r});return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(0,se.Z)(e)||null===e)return"object expected";if(!pe.isString(e.name))return"name: string expected";if(null!=e.size&&e.hasOwnProperty("size")&&!pe.isInteger(e.size)&&!(e.size&&pe.isInteger(e.size.low)&&pe.isInteger(e.size.high)))return"size: integer|Long expected";if(null!=e.partitionNames&&e.hasOwnProperty("partitionNames")){if(!Array.isArray(e.partitionNames))return"partitionNames: array expected";for(var t=0;t<e.partitionNames.length;++t)if(!pe.isString(e.partitionNames[t]))return"partitionNames: string[] expected"}return null},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.DynamicPartitionGroup)return e;var t=new fe.chromeos_update_engine.DynamicPartitionGroup;if(null!=e.name&&(t.name=String(e.name)),null!=e.size&&(pe.Long?(t.size=pe.Long.fromValue(e.size)).unsigned=!0:"string"===typeof e.size?t.size=parseInt(e.size,10):"number"===typeof e.size?t.size=e.size:"object"===(0,se.Z)(e.size)&&(t.size=new pe.LongBits(e.size.low>>>0,e.size.high>>>0).toNumber(!0))),e.partitionNames){if(!Array.isArray(e.partitionNames))throw TypeError(".chromeos_update_engine.DynamicPartitionGroup.partitionNames: array expected");t.partitionNames=[];for(var n=0;n<e.partitionNames.length;++n)t.partitionNames[n]=String(e.partitionNames[n])}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.partitionNames=[]),t.defaults)if(n.name="",pe.Long){var r=new pe.Long(0,0,!0);n.size=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.size=t.longs===String?"0":0;if(null!=e.name&&e.hasOwnProperty("name")&&(n.name=e.name),null!=e.size&&e.hasOwnProperty("size")&&("number"===typeof e.size?n.size=t.longs===String?String(e.size):e.size:n.size=t.longs===String?pe.Long.prototype.toString.call(e.size):t.longs===Number?new pe.LongBits(e.size.low>>>0,e.size.high>>>0).toNumber(!0):e.size),e.partitionNames&&e.partitionNames.length){n.partitionNames=[];for(var a=0;a<e.partitionNames.length;++a)n.partitionNames[a]=e.partitionNames[a]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e}(),e.DynamicPartitionMetadata=function(){function e(e){if(this.groups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.groups=pe.emptyArray,e.prototype.snapshotEnabled=!1,e.prototype.vabcEnabled=!1,e.prototype.vabcCompressionParam="",e.prototype.cowVersion=0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=ce.create()),null!=e.groups&&e.groups.length)for(var n=0;n<e.groups.length;++n)fe.chromeos_update_engine.DynamicPartitionGroup.encode(e.groups[n],t.uint32(10).fork()).ldelim();return null!=e.snapshotEnabled&&Object.hasOwnProperty.call(e,"snapshotEnabled")&&t.uint32(16).bool(e.snapshotEnabled),null!=e.vabcEnabled&&Object.hasOwnProperty.call(e,"vabcEnabled")&&t.uint32(24).bool(e.vabcEnabled),null!=e.vabcCompressionParam&&Object.hasOwnProperty.call(e,"vabcCompressionParam")&&t.uint32(34).string(e.vabcCompressionParam),null!=e.cowVersion&&Object.hasOwnProperty.call(e,"cowVersion")&&t.uint32(40).uint32(e.cowVersion),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.DynamicPartitionMetadata;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.groups&&r.groups.length||(r.groups=[]),r.groups.push(fe.chromeos_update_engine.DynamicPartitionGroup.decode(e,e.uint32()));break;case 2:r.snapshotEnabled=e.bool();break;case 3:r.vabcEnabled=e.bool();break;case 4:r.vabcCompressionParam=e.string();break;case 5:r.cowVersion=e.uint32();break;default:e.skipType(7&a);break}}return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(0,se.Z)(e)||null===e)return"object expected";if(null!=e.groups&&e.hasOwnProperty("groups")){if(!Array.isArray(e.groups))return"groups: array expected";for(var t=0;t<e.groups.length;++t){var n=fe.chromeos_update_engine.DynamicPartitionGroup.verify(e.groups[t]);if(n)return"groups."+n}}return null!=e.snapshotEnabled&&e.hasOwnProperty("snapshotEnabled")&&"boolean"!==typeof e.snapshotEnabled?"snapshotEnabled: boolean expected":null!=e.vabcEnabled&&e.hasOwnProperty("vabcEnabled")&&"boolean"!==typeof e.vabcEnabled?"vabcEnabled: boolean expected":null!=e.vabcCompressionParam&&e.hasOwnProperty("vabcCompressionParam")&&!pe.isString(e.vabcCompressionParam)?"vabcCompressionParam: string expected":null!=e.cowVersion&&e.hasOwnProperty("cowVersion")&&!pe.isInteger(e.cowVersion)?"cowVersion: integer expected":null},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.DynamicPartitionMetadata)return e;var t=new fe.chromeos_update_engine.DynamicPartitionMetadata;if(e.groups){if(!Array.isArray(e.groups))throw TypeError(".chromeos_update_engine.DynamicPartitionMetadata.groups: array expected");t.groups=[];for(var n=0;n<e.groups.length;++n){if("object"!==(0,se.Z)(e.groups[n]))throw TypeError(".chromeos_update_engine.DynamicPartitionMetadata.groups: object expected");t.groups[n]=fe.chromeos_update_engine.DynamicPartitionGroup.fromObject(e.groups[n])}}return null!=e.snapshotEnabled&&(t.snapshotEnabled=Boolean(e.snapshotEnabled)),null!=e.vabcEnabled&&(t.vabcEnabled=Boolean(e.vabcEnabled)),null!=e.vabcCompressionParam&&(t.vabcCompressionParam=String(e.vabcCompressionParam)),null!=e.cowVersion&&(t.cowVersion=e.cowVersion>>>0),t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.groups=[]),t.defaults&&(n.snapshotEnabled=!1,n.vabcEnabled=!1,n.vabcCompressionParam="",n.cowVersion=0),e.groups&&e.groups.length){n.groups=[];for(var r=0;r<e.groups.length;++r)n.groups[r]=fe.chromeos_update_engine.DynamicPartitionGroup.toObject(e.groups[r],t)}return null!=e.snapshotEnabled&&e.hasOwnProperty("snapshotEnabled")&&(n.snapshotEnabled=e.snapshotEnabled),null!=e.vabcEnabled&&e.hasOwnProperty("vabcEnabled")&&(n.vabcEnabled=e.vabcEnabled),null!=e.vabcCompressionParam&&e.hasOwnProperty("vabcCompressionParam")&&(n.vabcCompressionParam=e.vabcCompressionParam),null!=e.cowVersion&&e.hasOwnProperty("cowVersion")&&(n.cowVersion=e.cowVersion),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e}(),e.ApexInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.packageName="",e.prototype.version=pe.Long?pe.Long.fromBits(0,0,!1):0,e.prototype.isCompressed=!1,e.prototype.decompressedSize=pe.Long?pe.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=ce.create()),null!=e.packageName&&Object.hasOwnProperty.call(e,"packageName")&&t.uint32(10).string(e.packageName),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(16).int64(e.version),null!=e.isCompressed&&Object.hasOwnProperty.call(e,"isCompressed")&&t.uint32(24).bool(e.isCompressed),null!=e.decompressedSize&&Object.hasOwnProperty.call(e,"decompressedSize")&&t.uint32(32).int64(e.decompressedSize),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.ApexInfo;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.packageName=e.string();break;case 2:r.version=e.int64();break;case 3:r.isCompressed=e.bool();break;case 4:r.decompressedSize=e.int64();break;default:e.skipType(7&a);break}}return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!==(0,se.Z)(e)||null===e?"object expected":null!=e.packageName&&e.hasOwnProperty("packageName")&&!pe.isString(e.packageName)?"packageName: string expected":null==e.version||!e.hasOwnProperty("version")||pe.isInteger(e.version)||e.version&&pe.isInteger(e.version.low)&&pe.isInteger(e.version.high)?null!=e.isCompressed&&e.hasOwnProperty("isCompressed")&&"boolean"!==typeof e.isCompressed?"isCompressed: boolean expected":null==e.decompressedSize||!e.hasOwnProperty("decompressedSize")||pe.isInteger(e.decompressedSize)||e.decompressedSize&&pe.isInteger(e.decompressedSize.low)&&pe.isInteger(e.decompressedSize.high)?null:"decompressedSize: integer|Long expected":"version: integer|Long expected"},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.ApexInfo)return e;var t=new fe.chromeos_update_engine.ApexInfo;return null!=e.packageName&&(t.packageName=String(e.packageName)),null!=e.version&&(pe.Long?(t.version=pe.Long.fromValue(e.version)).unsigned=!1:"string"===typeof e.version?t.version=parseInt(e.version,10):"number"===typeof e.version?t.version=e.version:"object"===(0,se.Z)(e.version)&&(t.version=new pe.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber())),null!=e.isCompressed&&(t.isCompressed=Boolean(e.isCompressed)),null!=e.decompressedSize&&(pe.Long?(t.decompressedSize=pe.Long.fromValue(e.decompressedSize)).unsigned=!1:"string"===typeof e.decompressedSize?t.decompressedSize=parseInt(e.decompressedSize,10):"number"===typeof e.decompressedSize?t.decompressedSize=e.decompressedSize:"object"===(0,se.Z)(e.decompressedSize)&&(t.decompressedSize=new pe.LongBits(e.decompressedSize.low>>>0,e.decompressedSize.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});var n={};if(t.defaults){if(n.packageName="",pe.Long){var r=new pe.Long(0,0,!1);n.version=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.version=t.longs===String?"0":0;if(n.isCompressed=!1,pe.Long){var a=new pe.Long(0,0,!1);n.decompressedSize=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else n.decompressedSize=t.longs===String?"0":0}return null!=e.packageName&&e.hasOwnProperty("packageName")&&(n.packageName=e.packageName),null!=e.version&&e.hasOwnProperty("version")&&("number"===typeof e.version?n.version=t.longs===String?String(e.version):e.version:n.version=t.longs===String?pe.Long.prototype.toString.call(e.version):t.longs===Number?new pe.LongBits(e.version.low>>>0,e.version.high>>>0).toNumber():e.version),null!=e.isCompressed&&e.hasOwnProperty("isCompressed")&&(n.isCompressed=e.isCompressed),null!=e.decompressedSize&&e.hasOwnProperty("decompressedSize")&&("number"===typeof e.decompressedSize?n.decompressedSize=t.longs===String?String(e.decompressedSize):e.decompressedSize:n.decompressedSize=t.longs===String?pe.Long.prototype.toString.call(e.decompressedSize):t.longs===Number?new pe.LongBits(e.decompressedSize.low>>>0,e.decompressedSize.high>>>0).toNumber():e.decompressedSize),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e}(),e.ApexMetadata=function(){function e(e){if(this.apexInfo=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.apexInfo=pe.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=ce.create()),null!=e.apexInfo&&e.apexInfo.length)for(var n=0;n<e.apexInfo.length;++n)fe.chromeos_update_engine.ApexInfo.encode(e.apexInfo[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.ApexMetadata;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.apexInfo&&r.apexInfo.length||(r.apexInfo=[]),r.apexInfo.push(fe.chromeos_update_engine.ApexInfo.decode(e,e.uint32()));break;default:e.skipType(7&a);break}}return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(0,se.Z)(e)||null===e)return"object expected";if(null!=e.apexInfo&&e.hasOwnProperty("apexInfo")){if(!Array.isArray(e.apexInfo))return"apexInfo: array expected";for(var t=0;t<e.apexInfo.length;++t){var n=fe.chromeos_update_engine.ApexInfo.verify(e.apexInfo[t]);if(n)return"apexInfo."+n}}return null},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.ApexMetadata)return e;var t=new fe.chromeos_update_engine.ApexMetadata;if(e.apexInfo){if(!Array.isArray(e.apexInfo))throw TypeError(".chromeos_update_engine.ApexMetadata.apexInfo: array expected");t.apexInfo=[];for(var n=0;n<e.apexInfo.length;++n){if("object"!==(0,se.Z)(e.apexInfo[n]))throw TypeError(".chromeos_update_engine.ApexMetadata.apexInfo: object expected");t.apexInfo[n]=fe.chromeos_update_engine.ApexInfo.fromObject(e.apexInfo[n])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.apexInfo=[]),e.apexInfo&&e.apexInfo.length){n.apexInfo=[];for(var r=0;r<e.apexInfo.length;++r)n.apexInfo[r]=fe.chromeos_update_engine.ApexInfo.toObject(e.apexInfo[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e}(),e.DeltaArchiveManifest=function(){function e(e){if(this.installOperations=[],this.kernelInstallOperations=[],this.partitions=[],this.apexInfo=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.installOperations=pe.emptyArray,e.prototype.kernelInstallOperations=pe.emptyArray,e.prototype.blockSize=4096,e.prototype.signaturesOffset=pe.Long?pe.Long.fromBits(0,0,!0):0,e.prototype.signaturesSize=pe.Long?pe.Long.fromBits(0,0,!0):0,e.prototype.oldKernelInfo=null,e.prototype.newKernelInfo=null,e.prototype.oldRootfsInfo=null,e.prototype.newRootfsInfo=null,e.prototype.oldImageInfo=null,e.prototype.newImageInfo=null,e.prototype.minorVersion=0,e.prototype.partitions=pe.emptyArray,e.prototype.maxTimestamp=pe.Long?pe.Long.fromBits(0,0,!1):0,e.prototype.dynamicPartitionMetadata=null,e.prototype.partialUpdate=!1,e.prototype.apexInfo=pe.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=ce.create()),null!=e.installOperations&&e.installOperations.length)for(var n=0;n<e.installOperations.length;++n)fe.chromeos_update_engine.InstallOperation.encode(e.installOperations[n],t.uint32(10).fork()).ldelim();if(null!=e.kernelInstallOperations&&e.kernelInstallOperations.length)for(var r=0;r<e.kernelInstallOperations.length;++r)fe.chromeos_update_engine.InstallOperation.encode(e.kernelInstallOperations[r],t.uint32(18).fork()).ldelim();if(null!=e.blockSize&&Object.hasOwnProperty.call(e,"blockSize")&&t.uint32(24).uint32(e.blockSize),null!=e.signaturesOffset&&Object.hasOwnProperty.call(e,"signaturesOffset")&&t.uint32(32).uint64(e.signaturesOffset),null!=e.signaturesSize&&Object.hasOwnProperty.call(e,"signaturesSize")&&t.uint32(40).uint64(e.signaturesSize),null!=e.oldKernelInfo&&Object.hasOwnProperty.call(e,"oldKernelInfo")&&fe.chromeos_update_engine.PartitionInfo.encode(e.oldKernelInfo,t.uint32(50).fork()).ldelim(),null!=e.newKernelInfo&&Object.hasOwnProperty.call(e,"newKernelInfo")&&fe.chromeos_update_engine.PartitionInfo.encode(e.newKernelInfo,t.uint32(58).fork()).ldelim(),null!=e.oldRootfsInfo&&Object.hasOwnProperty.call(e,"oldRootfsInfo")&&fe.chromeos_update_engine.PartitionInfo.encode(e.oldRootfsInfo,t.uint32(66).fork()).ldelim(),null!=e.newRootfsInfo&&Object.hasOwnProperty.call(e,"newRootfsInfo")&&fe.chromeos_update_engine.PartitionInfo.encode(e.newRootfsInfo,t.uint32(74).fork()).ldelim(),null!=e.oldImageInfo&&Object.hasOwnProperty.call(e,"oldImageInfo")&&fe.chromeos_update_engine.ImageInfo.encode(e.oldImageInfo,t.uint32(82).fork()).ldelim(),null!=e.newImageInfo&&Object.hasOwnProperty.call(e,"newImageInfo")&&fe.chromeos_update_engine.ImageInfo.encode(e.newImageInfo,t.uint32(90).fork()).ldelim(),null!=e.minorVersion&&Object.hasOwnProperty.call(e,"minorVersion")&&t.uint32(96).uint32(e.minorVersion),null!=e.partitions&&e.partitions.length)for(var a=0;a<e.partitions.length;++a)fe.chromeos_update_engine.PartitionUpdate.encode(e.partitions[a],t.uint32(106).fork()).ldelim();if(null!=e.maxTimestamp&&Object.hasOwnProperty.call(e,"maxTimestamp")&&t.uint32(112).int64(e.maxTimestamp),null!=e.dynamicPartitionMetadata&&Object.hasOwnProperty.call(e,"dynamicPartitionMetadata")&&fe.chromeos_update_engine.DynamicPartitionMetadata.encode(e.dynamicPartitionMetadata,t.uint32(122).fork()).ldelim(),null!=e.partialUpdate&&Object.hasOwnProperty.call(e,"partialUpdate")&&t.uint32(128).bool(e.partialUpdate),null!=e.apexInfo&&e.apexInfo.length)for(var o=0;o<e.apexInfo.length;++o)fe.chromeos_update_engine.ApexInfo.encode(e.apexInfo[o],t.uint32(138).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof ue||(e=ue.create(e));var n=void 0===t?e.len:e.pos+t,r=new fe.chromeos_update_engine.DeltaArchiveManifest;while(e.pos<n){var a=e.uint32();switch(a>>>3){case 1:r.installOperations&&r.installOperations.length||(r.installOperations=[]),r.installOperations.push(fe.chromeos_update_engine.InstallOperation.decode(e,e.uint32()));break;case 2:r.kernelInstallOperations&&r.kernelInstallOperations.length||(r.kernelInstallOperations=[]),r.kernelInstallOperations.push(fe.chromeos_update_engine.InstallOperation.decode(e,e.uint32()));break;case 3:r.blockSize=e.uint32();break;case 4:r.signaturesOffset=e.uint64();break;case 5:r.signaturesSize=e.uint64();break;case 6:r.oldKernelInfo=fe.chromeos_update_engine.PartitionInfo.decode(e,e.uint32());break;case 7:r.newKernelInfo=fe.chromeos_update_engine.PartitionInfo.decode(e,e.uint32());break;case 8:r.oldRootfsInfo=fe.chromeos_update_engine.PartitionInfo.decode(e,e.uint32());break;case 9:r.newRootfsInfo=fe.chromeos_update_engine.PartitionInfo.decode(e,e.uint32());break;case 10:r.oldImageInfo=fe.chromeos_update_engine.ImageInfo.decode(e,e.uint32());break;case 11:r.newImageInfo=fe.chromeos_update_engine.ImageInfo.decode(e,e.uint32());break;case 12:r.minorVersion=e.uint32();break;case 13:r.partitions&&r.partitions.length||(r.partitions=[]),r.partitions.push(fe.chromeos_update_engine.PartitionUpdate.decode(e,e.uint32()));break;case 14:r.maxTimestamp=e.int64();break;case 15:r.dynamicPartitionMetadata=fe.chromeos_update_engine.DynamicPartitionMetadata.decode(e,e.uint32());break;case 16:r.partialUpdate=e.bool();break;case 17:r.apexInfo&&r.apexInfo.length||(r.apexInfo=[]),r.apexInfo.push(fe.chromeos_update_engine.ApexInfo.decode(e,e.uint32()));break;default:e.skipType(7&a);break}}return r},e.decodeDelimited=function(e){return e instanceof ue||(e=new ue(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!==(0,se.Z)(e)||null===e)return"object expected";if(null!=e.installOperations&&e.hasOwnProperty("installOperations")){if(!Array.isArray(e.installOperations))return"installOperations: array expected";for(var t=0;t<e.installOperations.length;++t){var n=fe.chromeos_update_engine.InstallOperation.verify(e.installOperations[t]);if(n)return"installOperations."+n}}if(null!=e.kernelInstallOperations&&e.hasOwnProperty("kernelInstallOperations")){if(!Array.isArray(e.kernelInstallOperations))return"kernelInstallOperations: array expected";for(var r=0;r<e.kernelInstallOperations.length;++r){var a=fe.chromeos_update_engine.InstallOperation.verify(e.kernelInstallOperations[r]);if(a)return"kernelInstallOperations."+a}}if(null!=e.blockSize&&e.hasOwnProperty("blockSize")&&!pe.isInteger(e.blockSize))return"blockSize: integer expected";if(null!=e.signaturesOffset&&e.hasOwnProperty("signaturesOffset")&&!pe.isInteger(e.signaturesOffset)&&!(e.signaturesOffset&&pe.isInteger(e.signaturesOffset.low)&&pe.isInteger(e.signaturesOffset.high)))return"signaturesOffset: integer|Long expected";if(null!=e.signaturesSize&&e.hasOwnProperty("signaturesSize")&&!pe.isInteger(e.signaturesSize)&&!(e.signaturesSize&&pe.isInteger(e.signaturesSize.low)&&pe.isInteger(e.signaturesSize.high)))return"signaturesSize: integer|Long expected";if(null!=e.oldKernelInfo&&e.hasOwnProperty("oldKernelInfo")){var o=fe.chromeos_update_engine.PartitionInfo.verify(e.oldKernelInfo);if(o)return"oldKernelInfo."+o}if(null!=e.newKernelInfo&&e.hasOwnProperty("newKernelInfo")){var i=fe.chromeos_update_engine.PartitionInfo.verify(e.newKernelInfo);if(i)return"newKernelInfo."+i}if(null!=e.oldRootfsInfo&&e.hasOwnProperty("oldRootfsInfo")){var s=fe.chromeos_update_engine.PartitionInfo.verify(e.oldRootfsInfo);if(s)return"oldRootfsInfo."+s}if(null!=e.newRootfsInfo&&e.hasOwnProperty("newRootfsInfo")){var l=fe.chromeos_update_engine.PartitionInfo.verify(e.newRootfsInfo);if(l)return"newRootfsInfo."+l}if(null!=e.oldImageInfo&&e.hasOwnProperty("oldImageInfo")){var u=fe.chromeos_update_engine.ImageInfo.verify(e.oldImageInfo);if(u)return"oldImageInfo."+u}if(null!=e.newImageInfo&&e.hasOwnProperty("newImageInfo")){var c=fe.chromeos_update_engine.ImageInfo.verify(e.newImageInfo);if(c)return"newImageInfo."+c}if(null!=e.minorVersion&&e.hasOwnProperty("minorVersion")&&!pe.isInteger(e.minorVersion))return"minorVersion: integer expected";if(null!=e.partitions&&e.hasOwnProperty("partitions")){if(!Array.isArray(e.partitions))return"partitions: array expected";for(var p=0;p<e.partitions.length;++p){var f=fe.chromeos_update_engine.PartitionUpdate.verify(e.partitions[p]);if(f)return"partitions."+f}}if(null!=e.maxTimestamp&&e.hasOwnProperty("maxTimestamp")&&!pe.isInteger(e.maxTimestamp)&&!(e.maxTimestamp&&pe.isInteger(e.maxTimestamp.low)&&pe.isInteger(e.maxTimestamp.high)))return"maxTimestamp: integer|Long expected";if(null!=e.dynamicPartitionMetadata&&e.hasOwnProperty("dynamicPartitionMetadata")){var d=fe.chromeos_update_engine.DynamicPartitionMetadata.verify(e.dynamicPartitionMetadata);if(d)return"dynamicPartitionMetadata."+d}if(null!=e.partialUpdate&&e.hasOwnProperty("partialUpdate")&&"boolean"!==typeof e.partialUpdate)return"partialUpdate: boolean expected";if(null!=e.apexInfo&&e.hasOwnProperty("apexInfo")){if(!Array.isArray(e.apexInfo))return"apexInfo: array expected";for(var h=0;h<e.apexInfo.length;++h){var g=fe.chromeos_update_engine.ApexInfo.verify(e.apexInfo[h]);if(g)return"apexInfo."+g}}return null},e.fromObject=function(e){if(e instanceof fe.chromeos_update_engine.DeltaArchiveManifest)return e;var t=new fe.chromeos_update_engine.DeltaArchiveManifest;if(e.installOperations){if(!Array.isArray(e.installOperations))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.installOperations: array expected");t.installOperations=[];for(var n=0;n<e.installOperations.length;++n){if("object"!==(0,se.Z)(e.installOperations[n]))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.installOperations: object expected");t.installOperations[n]=fe.chromeos_update_engine.InstallOperation.fromObject(e.installOperations[n])}}if(e.kernelInstallOperations){if(!Array.isArray(e.kernelInstallOperations))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.kernelInstallOperations: array expected");t.kernelInstallOperations=[];for(var r=0;r<e.kernelInstallOperations.length;++r){if("object"!==(0,se.Z)(e.kernelInstallOperations[r]))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.kernelInstallOperations: object expected");t.kernelInstallOperations[r]=fe.chromeos_update_engine.InstallOperation.fromObject(e.kernelInstallOperations[r])}}if(null!=e.blockSize&&(t.blockSize=e.blockSize>>>0),null!=e.signaturesOffset&&(pe.Long?(t.signaturesOffset=pe.Long.fromValue(e.signaturesOffset)).unsigned=!0:"string"===typeof e.signaturesOffset?t.signaturesOffset=parseInt(e.signaturesOffset,10):"number"===typeof e.signaturesOffset?t.signaturesOffset=e.signaturesOffset:"object"===(0,se.Z)(e.signaturesOffset)&&(t.signaturesOffset=new pe.LongBits(e.signaturesOffset.low>>>0,e.signaturesOffset.high>>>0).toNumber(!0))),null!=e.signaturesSize&&(pe.Long?(t.signaturesSize=pe.Long.fromValue(e.signaturesSize)).unsigned=!0:"string"===typeof e.signaturesSize?t.signaturesSize=parseInt(e.signaturesSize,10):"number"===typeof e.signaturesSize?t.signaturesSize=e.signaturesSize:"object"===(0,se.Z)(e.signaturesSize)&&(t.signaturesSize=new pe.LongBits(e.signaturesSize.low>>>0,e.signaturesSize.high>>>0).toNumber(!0))),null!=e.oldKernelInfo){if("object"!==(0,se.Z)(e.oldKernelInfo))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.oldKernelInfo: object expected");t.oldKernelInfo=fe.chromeos_update_engine.PartitionInfo.fromObject(e.oldKernelInfo)}if(null!=e.newKernelInfo){if("object"!==(0,se.Z)(e.newKernelInfo))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.newKernelInfo: object expected");t.newKernelInfo=fe.chromeos_update_engine.PartitionInfo.fromObject(e.newKernelInfo)}if(null!=e.oldRootfsInfo){if("object"!==(0,se.Z)(e.oldRootfsInfo))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.oldRootfsInfo: object expected");t.oldRootfsInfo=fe.chromeos_update_engine.PartitionInfo.fromObject(e.oldRootfsInfo)}if(null!=e.newRootfsInfo){if("object"!==(0,se.Z)(e.newRootfsInfo))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.newRootfsInfo: object expected");t.newRootfsInfo=fe.chromeos_update_engine.PartitionInfo.fromObject(e.newRootfsInfo)}if(null!=e.oldImageInfo){if("object"!==(0,se.Z)(e.oldImageInfo))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.oldImageInfo: object expected");t.oldImageInfo=fe.chromeos_update_engine.ImageInfo.fromObject(e.oldImageInfo)}if(null!=e.newImageInfo){if("object"!==(0,se.Z)(e.newImageInfo))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.newImageInfo: object expected");t.newImageInfo=fe.chromeos_update_engine.ImageInfo.fromObject(e.newImageInfo)}if(null!=e.minorVersion&&(t.minorVersion=e.minorVersion>>>0),e.partitions){if(!Array.isArray(e.partitions))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.partitions: array expected");t.partitions=[];for(var a=0;a<e.partitions.length;++a){if("object"!==(0,se.Z)(e.partitions[a]))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.partitions: object expected");t.partitions[a]=fe.chromeos_update_engine.PartitionUpdate.fromObject(e.partitions[a])}}if(null!=e.maxTimestamp&&(pe.Long?(t.maxTimestamp=pe.Long.fromValue(e.maxTimestamp)).unsigned=!1:"string"===typeof e.maxTimestamp?t.maxTimestamp=parseInt(e.maxTimestamp,10):"number"===typeof e.maxTimestamp?t.maxTimestamp=e.maxTimestamp:"object"===(0,se.Z)(e.maxTimestamp)&&(t.maxTimestamp=new pe.LongBits(e.maxTimestamp.low>>>0,e.maxTimestamp.high>>>0).toNumber())),null!=e.dynamicPartitionMetadata){if("object"!==(0,se.Z)(e.dynamicPartitionMetadata))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.dynamicPartitionMetadata: object expected");t.dynamicPartitionMetadata=fe.chromeos_update_engine.DynamicPartitionMetadata.fromObject(e.dynamicPartitionMetadata)}if(null!=e.partialUpdate&&(t.partialUpdate=Boolean(e.partialUpdate)),e.apexInfo){if(!Array.isArray(e.apexInfo))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.apexInfo: array expected");t.apexInfo=[];for(var o=0;o<e.apexInfo.length;++o){if("object"!==(0,se.Z)(e.apexInfo[o]))throw TypeError(".chromeos_update_engine.DeltaArchiveManifest.apexInfo: object expected");t.apexInfo[o]=fe.chromeos_update_engine.ApexInfo.fromObject(e.apexInfo[o])}}return t},e.toObject=function(e,t){t||(t={});var n={};if((t.arrays||t.defaults)&&(n.installOperations=[],n.kernelInstallOperations=[],n.partitions=[],n.apexInfo=[]),t.defaults){if(n.blockSize=4096,pe.Long){var r=new pe.Long(0,0,!0);n.signaturesOffset=t.longs===String?r.toString():t.longs===Number?r.toNumber():r}else n.signaturesOffset=t.longs===String?"0":0;if(pe.Long){var a=new pe.Long(0,0,!0);n.signaturesSize=t.longs===String?a.toString():t.longs===Number?a.toNumber():a}else n.signaturesSize=t.longs===String?"0":0;if(n.oldKernelInfo=null,n.newKernelInfo=null,n.oldRootfsInfo=null,n.newRootfsInfo=null,n.oldImageInfo=null,n.newImageInfo=null,n.minorVersion=0,pe.Long){var o=new pe.Long(0,0,!1);n.maxTimestamp=t.longs===String?o.toString():t.longs===Number?o.toNumber():o}else n.maxTimestamp=t.longs===String?"0":0;n.dynamicPartitionMetadata=null,n.partialUpdate=!1}if(e.installOperations&&e.installOperations.length){n.installOperations=[];for(var i=0;i<e.installOperations.length;++i)n.installOperations[i]=fe.chromeos_update_engine.InstallOperation.toObject(e.installOperations[i],t)}if(e.kernelInstallOperations&&e.kernelInstallOperations.length){n.kernelInstallOperations=[];for(var s=0;s<e.kernelInstallOperations.length;++s)n.kernelInstallOperations[s]=fe.chromeos_update_engine.InstallOperation.toObject(e.kernelInstallOperations[s],t)}if(null!=e.blockSize&&e.hasOwnProperty("blockSize")&&(n.blockSize=e.blockSize),null!=e.signaturesOffset&&e.hasOwnProperty("signaturesOffset")&&("number"===typeof e.signaturesOffset?n.signaturesOffset=t.longs===String?String(e.signaturesOffset):e.signaturesOffset:n.signaturesOffset=t.longs===String?pe.Long.prototype.toString.call(e.signaturesOffset):t.longs===Number?new pe.LongBits(e.signaturesOffset.low>>>0,e.signaturesOffset.high>>>0).toNumber(!0):e.signaturesOffset),null!=e.signaturesSize&&e.hasOwnProperty("signaturesSize")&&("number"===typeof e.signaturesSize?n.signaturesSize=t.longs===String?String(e.signaturesSize):e.signaturesSize:n.signaturesSize=t.longs===String?pe.Long.prototype.toString.call(e.signaturesSize):t.longs===Number?new pe.LongBits(e.signaturesSize.low>>>0,e.signaturesSize.high>>>0).toNumber(!0):e.signaturesSize),null!=e.oldKernelInfo&&e.hasOwnProperty("oldKernelInfo")&&(n.oldKernelInfo=fe.chromeos_update_engine.PartitionInfo.toObject(e.oldKernelInfo,t)),null!=e.newKernelInfo&&e.hasOwnProperty("newKernelInfo")&&(n.newKernelInfo=fe.chromeos_update_engine.PartitionInfo.toObject(e.newKernelInfo,t)),null!=e.oldRootfsInfo&&e.hasOwnProperty("oldRootfsInfo")&&(n.oldRootfsInfo=fe.chromeos_update_engine.PartitionInfo.toObject(e.oldRootfsInfo,t)),null!=e.newRootfsInfo&&e.hasOwnProperty("newRootfsInfo")&&(n.newRootfsInfo=fe.chromeos_update_engine.PartitionInfo.toObject(e.newRootfsInfo,t)),null!=e.oldImageInfo&&e.hasOwnProperty("oldImageInfo")&&(n.oldImageInfo=fe.chromeos_update_engine.ImageInfo.toObject(e.oldImageInfo,t)),null!=e.newImageInfo&&e.hasOwnProperty("newImageInfo")&&(n.newImageInfo=fe.chromeos_update_engine.ImageInfo.toObject(e.newImageInfo,t)),null!=e.minorVersion&&e.hasOwnProperty("minorVersion")&&(n.minorVersion=e.minorVersion),e.partitions&&e.partitions.length){n.partitions=[];for(var l=0;l<e.partitions.length;++l)n.partitions[l]=fe.chromeos_update_engine.PartitionUpdate.toObject(e.partitions[l],t)}if(null!=e.maxTimestamp&&e.hasOwnProperty("maxTimestamp")&&("number"===typeof e.maxTimestamp?n.maxTimestamp=t.longs===String?String(e.maxTimestamp):e.maxTimestamp:n.maxTimestamp=t.longs===String?pe.Long.prototype.toString.call(e.maxTimestamp):t.longs===Number?new pe.LongBits(e.maxTimestamp.low>>>0,e.maxTimestamp.high>>>0).toNumber():e.maxTimestamp),null!=e.dynamicPartitionMetadata&&e.hasOwnProperty("dynamicPartitionMetadata")&&(n.dynamicPartitionMetadata=fe.chromeos_update_engine.DynamicPartitionMetadata.toObject(e.dynamicPartitionMetadata,t)),null!=e.partialUpdate&&e.hasOwnProperty("partialUpdate")&&(n.partialUpdate=e.partialUpdate),e.apexInfo&&e.apexInfo.length){n.apexInfo=[];for(var u=0;u<e.apexInfo.length;++u)n.apexInfo[u]=fe.chromeos_update_engine.ApexInfo.toObject(e.apexInfo[u],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,le.util.toJSONOptions)},e}(),e}(),he=n(670),ge=n(8143),me=n(1238),ye=n(1753),we=n(6951),be=n(9330),ve=n(8115),Oe=n(7554),xe=n(6356),ke=n(8273),_e=(n(2222),n(2472),n(8012),n(2990),n(8927),n(3105),n(5035),n(4345),n(7174),n(2846),n(4731),n(7209),n(6319),n(8867),n(7789),n(3739),n(9368),n(4483),n(2056),n(3462),n(678),n(7462),n(3824),n(5021),n(2974),n(5016),n(4603),n(8450),n(4916),n(8386),n(4723),n(1532),n(2352)),Se=(n(3123),function(e){(0,Oe.Z)(n,e);var t=(0,xe.Z)(n);function n(e){var r;return(0,ve.Z)(this,n),r=t.call(this),(0,we.Z)((0,ge.Z)(r),"nonAB",!0),(0,we.Z)((0,ge.Z)(r),"Blocksize",4096),(0,we.Z)((0,ge.Z)(r),"packedFile",void 0),r.packedFile=e,r}return(0,be.Z)(n,[{key:"init",value:function(){var e=(0,b.Z)(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.Blocksize=4096,this.partialUpdate=!1,this.dynamicPartitionMetadata=new de.DynamicPartitionMetadata({snapshotEnabled:!1,vabcEnabled:!1}),this.partitions=[],t=/[\w_]+(?=\.transfer.list)/g,e.next=7,this.packedFile.getEntries();case 7:n=e.sent,r=(0,he.Z)(n),e.prev=9,r.s();case 11:if((a=r.n()).done){e.next=24;break}if(o=a.value,!o.filename.match(t)){e.next=22;break}return i=o.filename.match(t)[0],s=new de.PartitionUpdate({partitionName:i}),e.next=18,o.getData(new _e.Ek);case 18:return s.rawText=e.sent,e.next=21,this.parseTransferList(s);case 21:this.partitions.push(s);case 22:e.next=11;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](9),r.e(e.t0);case 29:return e.prev=29,r.f(),e.finish(29);case 32:case"end":return e.stop()}}),e,this,[[9,26,29,32]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"parseTransferList",value:function(){var e=(0,b.Z)(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.rawText.split("\n"),!(n.length<4)){e.next=3;break}throw"At least 4 lines in header should be provided.";case 3:return t.version=n[0],t.totalBlocks=parseInt(n[1]),t.entryStashed=parseInt(n[2]),t.maxStashed=parseInt(n[3]),t.newPartitionInfo=new de.PartitionInfo,t.newPartitionInfo.hash=new Uint8Array,t.newPartitionInfo.size="unknown",t.operations=new Array,e.next=13,this.sizeNewData(t.partitionName);case 13:r=e.sent,a=(0,he.Z)(n.slice(4)),e.prev=15,a.s();case 17:if((o=a.n()).done){e.next=48;break}i=o.value,s=new de.InstallOperation,l=i.split(" "),s.type=l[0],e.t0=s.type,e.next="zero"===e.t0?25:"new"===e.t0?27:"erase"===e.t0?31:"move"===e.t0?33:"bsdiff"===e.t0?35:"imgdiff"===e.t0?39:"stash"===e.t0?43:"free"===e.t0?44:45;break;case 25:return s.dstExtents=l.slice(1).reduce(Pe,[]),e.abrupt("break",45);case 27:return s.dataLength=r,r=0,s.dstExtents=l.slice(1).reduce(Pe,[]),e.abrupt("break",45);case 31:return s.dstExtents=l.slice(1).reduce(Pe,[]),e.abrupt("break",45);case 33:return s.dstExtents=Pe([],l[2]),e.abrupt("break",45);case 35:return s.dataOffset=parseInt(l[1]),s.dataLength=parseInt(l[2]),s.dstExtents=Pe([],l[5]),e.abrupt("break",45);case 39:return s.dataOffset=parseInt(l[1]),s.dataLength=parseInt(l[2]),s.dstExtents=Pe([],l[5]),e.abrupt("break",45);case 43:return e.abrupt("break",45);case 44:return e.abrupt("break",45);case 45:t.operations.push(s);case 46:e.next=17;break;case 48:e.next=53;break;case 50:e.prev=50,e.t1=e["catch"](15),a.e(e.t1);case 53:return e.prev=53,a.f(),e.finish(53);case 56:case"end":return e.stop()}}),e,this,[[15,50,53,56]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sizeNewData",value:function(){var e=(0,b.Z)(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.packedFile.getEntries();case 2:n=e.sent,r=new RegExp(t+".new.dat.*"),a=(0,he.Z)(n),e.prev=5,a.s();case 7:if((o=a.n()).done){e.next=13;break}if(i=o.value,!i.filename.match(r)){e.next=11;break}return e.abrupt("return",i.uncompressedSize);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(de.DeltaArchiveManifest));function Pe(e,t){var n=new RegExp("[d,]+");if(t.match(n))for(var r=t.split(","),a=1;a<r.length;a+=2){var o=new Object({startBlock:parseInt(r[a]),numBlocks:parseInt(r[a+1])-parseInt(r[a])});e.push(o)}return e}var Ie="CrAU",Ee=8,ze=8,Le=4,Te=Ie.length+Ee+ze+Le,je=2,De=[{prefix:"pre-build",key:"preBuild",name:"Pre-build"},{prefix:"pre-build-incremental",key:"preBuildVersion",name:"Pre-build version"},{prefix:"post-build",key:"postBuild",name:"Post-build"},{prefix:"post-build-incremental",key:"postBuildVersion",name:"Post-build version"},{prefix:"post-security-patch-level",key:"postSecurityPatchLevel",name:"Post-build SPL"},{prefix:"post-timestamp",key:"postTimestamp",name:"Post-build timestamp"}],Ae=function(e){(0,Oe.Z)(n,e);var t=(0,xe.Z)(n);function n(){return(0,ve.Z)(this,n),t.apply(this,arguments)}return(0,be.Z)(n)}((0,ke.Z)(Error)),Be=(0,be.Z)((function e(t,n,r,a){(0,ve.Z)(this,e),(0,we.Z)(this,"magic",void 0),(0,we.Z)(this,"version",void 0),(0,we.Z)(this,"manifest_len",void 0),(0,we.Z)(this,"metadata_signature_len",void 0),this.magic=t,this.version=n,this.manifest_len=r,this.metadata_signature_len=a}));function Ze(e,t,n){return Ce.apply(this,arguments)}function Ce(){return Ce=(0,b.Z)(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=DataView,e.next=3,t.slice(n,n+r).arrayBuffer();case 3:e.t1=e.sent,a=new e.t0(e.t1),"function"!==typeof a.getBigUint64&&(a.getBigUint64=function(e){var t=BigInt(a.getUint32(e)),n=BigInt(a.getUint32(e+4)),r=4294967296n*t+n;return r}),e.t2=r,e.next=2===e.t2?9:4===e.t2?10:8===e.t2?11:12;break;case 9:return e.abrupt("return",a.getUint16(0));case 10:return e.abrupt("return",a.getUint32(0));case 11:return e.abrupt("return",Number(a.getBigUint64(0)));case 12:throw"Cannot read this integer with size "+r;case 13:case"end":return e.stop()}}),e)}))),Ce.apply(this,arguments)}var Ne=function(e){(0,Oe.Z)(n,e);var t=(0,xe.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,ve.Z)(this,n),e=t.call(this),(0,we.Z)((0,ge.Z)(e),"offset",void 0),(0,we.Z)((0,ge.Z)(e),"contentType",void 0),(0,we.Z)((0,ge.Z)(e),"blob",void 0),(0,we.Z)((0,ge.Z)(e),"prefixLength",void 0),(0,we.Z)((0,ge.Z)(e),"header",void 0),e.offset=0,e.contentType=r,e.blob=new Blob([],{type:r}),e.prefixLength=0,e}return(0,be.Z)(n,[{key:"readHeader",value:function(){var e=(0,b.Z)(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s,l,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=0,r=function(e){var r=Ze(t,n,e);return n+=e,r},e.next=4,t.slice(0,Te).arrayBuffer();case 4:if(a=e.sent,o=new TextDecoder,i=a.slice(0,Ie.length),s=o.decode(i),s==Ie){e.next=10;break}throw new Error("MAGIC is not correct, expected: ".concat(Ie," actual: ").concat(s));case 10:return n+=Ie.length,e.next=13,r(Ee);case 13:return l=e.sent,e.next=16,r(ze);case 16:if(u=e.sent,l==je){e.next=19;break}throw new Error("Unexpected major version number: ".concat(l));case 19:return e.next=21,r(Le);case 21:c=e.sent,this.header=new Be(s,l,u,c);case 23:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"writeUint8Array",value:function(){var e=(0,b.Z)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if((0,me.Z)((0,ye.Z)(n.prototype),"writeUint8Array",this).call(this,t),this.blob=new Blob([this.blob,t.buffer],{type:this.contentType}),this.offset=this.blob.size,!(this.offset>=Te&&0==this.prefixLength)){e.next=9;break}return console.log("Parsing header!"),e.next=7,this.readHeader(this.blob);case 7:this.prefixLength=Te+this.header.manifest_len+this.header.metadata_signature_len,console.log("Computed metadata length: ".concat(this.prefixLength));case 9:if(!(this.prefixLength>0)){e.next=14;break}if(console.log("".concat(this.offset,"/").concat(this.prefixLength)),!(this.offset>=this.prefixLength)){e.next=14;break}throw this.blob=this.blob.slice(0,this.prefixLength),new Ae;case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getData",value:function(){return this.blob}}]),n}(_e.QV),Re=function(){function e(t){(0,ve.Z)(this,e),(0,we.Z)(this,"zipreader",void 0),(0,we.Z)(this,"buffer",void 0),(0,we.Z)(this,"metadata",void 0),(0,we.Z)(this,"manifest",void 0),(0,we.Z)(this,"metadata_signature",void 0),(0,we.Z)(this,"header",void 0),t instanceof File?this.zipreader=new _e.Mr(new _e.Nt(t)):t instanceof URL?this.zipreader=new _e.Mr(new _e.pE(t.href)):this.zipreader=t.reader}return(0,be.Z)(e,[{key:"getMetadataLength",value:function(){return Te+this.header.manifest_len+this.header.metadata_signature_len}},{key:"unzip",value:function(){var e=(0,b.Z)(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.zipreader.getEntries();case 2:t=e.sent,n=(0,he.Z)(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=35;break}if(a=r.value,"payload.bin"!=a.filename){e.next=28;break}return o=new Ne(""),e.prev=10,e.next=13,a.getData(o);case 13:e.next=22;break;case 15:if(e.prev=15,e.t0=e["catch"](10),!(e.t0 instanceof Ae)){e.next=20;break}e.next=22;break;case 20:throw console.log(e.t0),e.t0;case 22:return this.buffer=o.getData(),e.next=25,this.readManifest(this.buffer,o.header);case 25:console.log("AB OTA manifest parsed"),e.next=33;break;case 28:if("META-INF/com/android/metadata"!=a.filename){e.next=33;break}return e.next=31,a.getData(new _e.Ek);case 31:this.metadata=e.sent,console.log("OTA Package metadata parsed");case 33:e.next=6;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e["catch"](4),n.e(e.t1);case 40:return e.prev=40,n.f(),e.finish(40);case 43:if(this.manifest){e.next=57;break}return console.log("Failed to parse AB OTA package, falling back to non-AB"),e.prev=45,i=new Se(this.zipreader),e.next=49,i.init();case 49:i.nonAB=!0,this.manifest=i,e.next=57;break;case 53:return e.prev=53,e.t2=e["catch"](45),alert("Please select a legit OTA package"),e.abrupt("return");case 57:case"end":return e.stop()}}),e,this,[[4,37,40,43],[10,15],[45,53]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"readManifest",value:function(){var e=(0,b.Z)(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.header=n,r=Te,e.next=4,t.slice(r,r+n.manifest_len).arrayBuffer();case 4:return a=e.sent,r+=n.manifest_len,this.manifest=de.DeltaArchiveManifest.decode(new Uint8Array(a)),e.next=9,t.slice(r,r+n.metadata_signature_len).arrayBuffer();case 9:o=e.sent,r+=n.metadata_signature_len,this.metadata_signature=de.Signatures.decode(new Uint8Array(o)),this.manifest.nonAB=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"parseMetadata",value:function(){var e,t=(0,he.Z)(De);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=new RegExp(n.prefix+".+");this.metadata.match(r)?this[n.key]=He(this.metadata.match(r)[0],n.prefix):this[n.key]=""}}catch(a){t.e(a)}finally{t.f()}}},{key:"init",value:function(){var e=(0,b.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.unzip();case 2:this.parseMetadata();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),Me=function(e){(0,Oe.Z)(n,e);var t=(0,xe.Z)(n);function n(){return(0,ve.Z)(this,n),t.apply(this,arguments)}return(0,be.Z)(n,[{key:"getWithDefault",value:function(e){return this.has(e)?this.get(e):e}}]),n}((0,ke.Z)(Map)),Fe=(0,be.Z)((function e(){(0,ve.Z)(this,e),(0,we.Z)(this,"mapType",void 0);var t=de.InstallOperation.Type;this.mapType=new Me;for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];this.mapType.set(t[a],a)}})),Ue=(0,be.Z)((function e(){(0,ve.Z)(this,e),(0,we.Z)(this,"mapType",void 0);var t=de.CowMergeOperation.Type;this.mapType=new Me;for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];this.mapType.set(t[a],a)}}));function Ve(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r="",a=0;a<e.length;a++){var o=e[a].toString(16).toUpperCase();2===o.length?r+=o+(t?" ":""):r+="0"+o+(t?" ":""),(a+1)%n==0&&t&&(r+="\n")}return r}function He(e,t){return e.slice(t.length+1,e.length)}var We=function(e){return(0,l.dD)("data-v-44174082"),e=e(),(0,l.Cn)(),e},qe={key:0},Ke=We((function(){return(0,l._)("strong",null," Data offset: ",-1)})),Je={key:1},Ye=We((function(){return(0,l._)("strong",null," Data length: ",-1)})),Ge={key:2},$e=We((function(){return(0,l._)("strong",null," Source: ",-1)})),Xe=We((function(){return(0,l._)("br",null,null,-1)})),Qe={key:3},et=We((function(){return(0,l._)("strong",null," Destination: ",-1)})),tt=We((function(){return(0,l._)("br",null,null,-1)}));function nt(e,t,n,r,a,o){var i=(0,l.up)("v-divider");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("ul",null,[(0,l._)("h5",null,(0,u.zw)(e.mapType.getWithDefault(e.operation.type)),1),e.operation.hasOwnProperty("dataOffset")?((0,l.wg)(),(0,l.iD)("li",qe,[Ke,(0,l.Uk)(" "+(0,u.zw)(e.operation.dataOffset),1)])):(0,l.kq)("",!0),e.operation.hasOwnProperty("dataLength")?((0,l.wg)(),(0,l.iD)("li",Je,[Ye,(0,l.Uk)(" "+(0,u.zw)(e.operation.dataLength),1)])):(0,l.kq)("",!0),e.operation.hasOwnProperty("srcExtents")?((0,l.wg)(),(0,l.iD)("li",Ge,[$e,(0,l.Uk)(" "+(0,u.zw)(e.operation.srcExtents.length)+" extents ("+(0,u.zw)(e.srcTotalBlocks)+" blocks) ",1),Xe,(0,l.Uk)(" "+(0,u.zw)(e.srcBlocks),1)])):(0,l.kq)("",!0),e.operation.hasOwnProperty("dstExtents")?((0,l.wg)(),(0,l.iD)("li",Qe,[et,(0,l.Uk)(" "+(0,u.zw)(e.operation.dstExtents.length)+" extents ("+(0,u.zw)(e.dstTotalBlocks)+" blocks) ",1),tt,(0,l.Uk)(" "+(0,u.zw)(e.dstBlocks),1)])):(0,l.kq)("",!0)]),(0,l.Wm)(i)],64)}n(4747),n(7852);var rt=n(1851),at=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15;(0,ve.Z)(this,e),(0,we.Z)(this,"statisticData",void 0),(0,we.Z)(this,"trimmedData",void 0),(0,we.Z)(this,"title",void 0),(0,we.Z)(this,"unit",void 0),(0,we.Z)(this,"maximumEntries",void 0),this.statisticData=t,this.trimmedData=ot(t,a),this.title=n,this.unit=r,this.maximumEntries=a}return(0,be.Z)(e,[{key:"listData",value:function(){var e,t="",n=(0,he.Z)(this.statisticData);try{for(n.s();!(e=n.n()).done;){var r=(0,rt.Z)(e.value,2),a=r[0],o=r[1];t+=a+" : "+o.toString()+" Blocks\n"}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"getEchartsOption",value:function(){var e={};return e.title={text:this.title,left:"center"},e.tooltip={trigger:"item",formatter:"{a} <br/>{b} : {c} "+this.unit+" ({d}%)"},e.legend={orient:"horizontal",left:"top",top:"10%",data:Array.from(this.trimmedData.keys())},e.series=[{name:this.title,type:"pie",radius:"55%",center:["50%","60%"],data:Array.from(this.trimmedData).map((function(e){return{value:e[1],name:e[0]}})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],e}}]),e}();function ot(e,t){if(e.size<=t)return e;for(var n=new Map,r=0;r<t;r++){var a,o=0,i="",s=(0,he.Z)(e);try{for(s.s();!(a=s.n()).done;){var l=(0,rt.Z)(a.value,2),u=l[0],c=l[1];n.get(u)||c>o&&(o=c,i=u)}}catch(y){s.e(y)}finally{s.f()}n.set(i,o)}var p,f=0,d=(0,he.Z)(e);try{for(d.s();!(p=d.n()).done;){var h=(0,rt.Z)(p.value,2),g=h[0],m=h[1];n.get(g)||(f+=m)}}catch(y){d.e(y)}finally{d.f()}return n.set("other",f),n}var it=function(){function e(t){(0,ve.Z)(this,e),(0,we.Z)(this,"build",void 0),(0,we.Z)(this,"mapFiles",void 0),(0,we.Z)(this,"maps",void 0),t instanceof File?this.build=new _e.Mr(new _e.Nt(t)):this.build=new _e.Mr(new _e.pE(t.href)),this.mapFiles=new Map,this.maps=new Map}return(0,be.Z)(e,[{key:"init",value:function(){var e=(0,b.Z)(regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.build.getEntries();case 2:t=e.sent,n=/IMAGES\/[a-z_]*\.map/g,r=/[\w_]+(?=\.map)/g,t.forEach((function(e){e.filename.match(n)&&a.mapFiles.set(e.filename.match(r)[0],e)}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"add",value:function(){var e=(0,b.Z)(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,l,u,c,p,f,d,h,g;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r=[],a=/\d+/g,o=/\d+\-\d+/g,i=0;i<n;i++)r[i]="<".concat(t,">");if(!this.mapFiles.get(t)){e.next=14;break}return e.next=7,this.mapFiles.get(t).getData(new _e.Ek);case 7:s=e.sent,l=s.split("\n"),u=(0,he.Z)(l);try{for(u.s();!(c=u.n()).done;)for(p=c.value,f=p.split(" "),d=1;d<f.length;d++)h=0,g=0,f[d].match(o)?(h=parseInt(f[d].match(/\d+/g)[0]),g=parseInt(f[d].match(/\d+/g)[1])):(h=parseInt(f[d].match(a)),g=parseInt(f[d].match(a))),st(r,f[0],h,g)}catch(m){u.e(m)}finally{u.f()}this.maps.set(t,r),e.next=15;break;case 14:this.maps.set(t,r);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"query",value:function(e,t){var n,r=[],a=this.maps.get(e),o=(0,he.Z)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;r.push(lt(a,i.startBlock,i.startBlock+i.numBlocks))}}catch(s){o.e(s)}finally{o.f()}return r}}]),e}();function st(e,t,n,r){for(var a=n;a<=r;a++)e[a]=t}function lt(e,t,n){return e[t]?e[t]:"unknown"}function ut(e,t,n){e.get(t)||e.set(t,0),e.set(t,e.get(t)+n)}function ct(e){var t,n=new Map,r=new Fe,a=(0,he.Z)(e);try{for(a.s();!(t=a.n()).done;){var o,i=t.value,s=(0,he.Z)(i.operations);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=r.mapType.getWithDefault(l.type);ut(n,u,bt(l.dstExtents))}}catch(c){s.e(c)}finally{s.f()}}}catch(c){a.e(c)}finally{a.f()}return n}function pt(e,t){var n,r=new Map,a=new Ue,o=0,i=(0,he.Z)(e);try{for(i.s();!(n=i.n()).done;){var s,l=n.value,u=(0,he.Z)(l.mergeOperations);try{for(u.s();!(s=u.n()).done;){var c=s.value,p=a.mapType.getWithDefault(c.type);ut(r,p,c.dstExtent.numBlocks)}}catch(f){u.e(f)}finally{u.f()}if(null==l.newPartitionInfo)throw new Error("Partition ".concat(l.partitionName," doesn't have new_partition_info field."));o+=Math.ceil(l.newPartitionInfo.size/t)}}catch(f){i.e(f)}finally{i.f()}return r.forEach((function(e,t){return o-=e})),r.set("COW_REPLACE",o),r}function ft(e){var t,n=new Map,r=new Fe,a=(0,he.Z)(e);try{for(a.s();!(t=a.n()).done;){var o,i=t.value,s=(0,he.Z)(i.operations);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=r.mapType.getWithDefault(l.type);ut(n,u,l.dataLength)}}catch(c){s.e(c)}finally{s.f()}}}catch(c){a.e(c)}finally{a.f()}return n}function dt(e,t,n){return ht.apply(this,arguments)}function ht(){return ht=(0,b.Z)(regeneratorRuntime.mark((function e(t,n,r){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,gt(t,n,r);case 2:return a=e.sent,o=new Map,a.forEach((function(e,t){ut(o,xt(t),e)})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ht.apply(this,arguments)}function gt(e,t,n){return mt.apply(this,arguments)}function mt(){return mt=(0,b.Z)(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,s,l,u,c,p,f,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=new Map,r){e.next=3;break}return e.abrupt("return",a);case 3:return o=new it(r),e.next=6,o.init();case 6:i=(0,he.Z)(t),e.prev=7,i.s();case 9:if((s=i.n()).done){e.next=35;break}return l=s.value,e.next=13,o.add(l.partitionName,Math.ceil(l.newPartitionInfo.size/n));case 13:u=(0,he.Z)(l.operations),e.prev=14,u.s();case 16:if((c=u.n()).done){e.next=25;break}if(p=c.value,p.hasOwnProperty("dataLength")){e.next=20;break}return e.abrupt("continue",23);case 20:f=o.query(l.partitionName,p.dstExtents),d=Ot(f,p.dstExtents,p.dataLength),d.forEach((function(e,t){ut(a,t,e)}));case 23:e.next=16;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e["catch"](14),u.e(e.t0);case 30:return e.prev=30,u.f(),e.finish(30);case 33:e.next=9;break;case 35:e.next=40;break;case 37:e.prev=37,e.t1=e["catch"](7),i.e(e.t1);case 40:return e.prev=40,i.f(),e.finish(40);case 43:return e.abrupt("return",a);case 44:case"end":return e.stop()}}),e,null,[[7,37,40,43],[14,27,30,33]])}))),mt.apply(this,arguments)}function yt(e,t){return wt.apply(this,arguments)}function wt(){return wt=(0,b.Z)(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=s.length>2&&void 0!==s[2]?s[2]:4096,a=s.length>3&&void 0!==s[3]?s[3]:null,e.t0=t,e.next="blocks"===e.t0?5:"payload"===e.t0?8:"COWmerge"===e.t0?11:"filenames"===e.t0?14:"extensions"===e.t0?21:28;break;case 5:return o=ct(n),i=new at(o,"Operated blocks in target build","blocks"),e.abrupt("break",28);case 8:return o=ft(n),i=new at(o,"Payload disk usage","bytes"),e.abrupt("break",28);case 11:return o=pt(n,r),i=new at(o,"COW merge operations","blocks"),e.abrupt("break",28);case 14:if(null!=a){e.next=16;break}throw new Error("Target file is required for filenames analysis");case 16:return e.next=18,gt(n,r,a);case 18:return o=e.sent,i=new at(o,"Size of operated filenames","bytes"),e.abrupt("break",28);case 21:if(null!=a){e.next=23;break}throw new Error("Target file is required for filenames analysis");case 23:return e.next=25,dt(n,r,a);case 25:return o=e.sent,i=new at(o,"Size of operated extensions","bytes"),e.abrupt("break",28);case 28:if(!i){e.next=32;break}return e.abrupt("return",i);case 32:throw"Please double check if this is a proper AB OTA package.";case 33:case"end":return e.stop()}}),e)}))),wt.apply(this,arguments)}function bt(e){if(!e)return 0;var t=function(e,t){return e+t.numBlocks};return e.reduce(t,0)}function vt(e){var t=function(e,t){return e+"("+t.startBlock+","+t.numBlocks+")"};return e.reduce(t,"")}function Ot(e,t,n){for(var r=bt(t),a=new Map,o=0;o<e.length;o++)ut(a,e[o],Math.round(n*t[o].numBlocks/r));return a}function xt(e){var t=e.split(".");return t.length>1?t[t.length-1]:"unknown"===t[0]?"unknown":"<"==e[0]&&e.endsWith(">")?e:"no-extension"}var kt=(0,l.aZ)({props:{operation:{type:Object,required:!0},mapType:{type:Me,required:!0}},data:function(){return{srcTotalBlocks:0,srcBlocks:"",dstTotalBlocks:0,dstBlocks:""}},mounted:function(){this.operation.srcExtents&&(this.srcTotalBlocks=bt(this.operation.srcExtents),this.srcBlocks=vt(this.operation.srcExtents)),this.operation.dstExtents&&(this.dstTotalBlocks=bt(this.operation.dstExtents),this.dstBlocks=vt(this.operation.dstExtents))}});const _t=(0,d.Z)(kt,[["render",nt],["__scopeId","data-v-44174082"]]);var St=_t,Pt=(0,l.aZ)({components:{OperationDetail:St},props:{partition:{type:de.PartitionUpdate,required:!0},dynamicPartitionList:{type:Array,required:!0}},data:function(){return{showOPs:!1,showInfo:!1,opType:new Fe}},methods:{toggle:function(e){this[e]=!this[e]},octToHex:Ve},computed:{readableTimestamp:function(){var e=parseInt(this.partition.version);return isNaN(e)?"":new Date(1e3*e).toString()},isDynamicPartition:function(){return this.dynamicPartitionList.indexOf(this.partition.partitionName)>=0}}});const It=(0,d.Z)(Pt,[["render",ie],["__scopeId","data-v-6dba348a"]]);var Et=It,zt=(n(3210),function(e){return(0,l.dD)("data-v-0514c264"),e=e(),(0,l.Cn)(),e}),Lt=zt((function(){return(0,l._)("h3",null,"Basic infos",-1)})),Tt={class:"align"},jt=zt((function(){return(0,l._)("strong",null," File name ",-1)})),Dt=zt((function(){return(0,l._)("strong",null," File size ",-1)})),At={class:"align"},Bt={class:"wrap"},Zt={key:2},Ct={class:"align"},Nt=zt((function(){return(0,l._)("strong",null," Incremental ",-1)})),Rt={key:0},Mt={key:1},Ft=zt((function(){return(0,l._)("strong",null," Partial ",-1)})),Ut={key:0},Vt={key:1},Ht=zt((function(){return(0,l._)("strong",null," A/B update ",-1)})),Wt={key:0},qt={key:1},Kt=zt((function(){return(0,l._)("strong",null," VAB ",-1)})),Jt={key:0},Yt={key:1},Gt=zt((function(){return(0,l._)("strong",null," VABC ",-1)})),$t={key:0},Xt={key:1},Qt={key:0},en=zt((function(){return(0,l._)("strong",null," Total Dynamic Partition Size ",-1)})),tn={key:1},nn=zt((function(){return(0,l._)("strong",null," Total VABC COW Size ",-1)}));function rn(e,t,n,r,a,o){return(0,l.wg)(),(0,l.iD)(l.HY,null,[Lt,e.zipFile?((0,l.wg)(),(0,l.iD)("div",(0,u.vs)((0,l.dG)({key:0},e.$attrs)),[(0,l._)("ul",Tt,[(0,l._)("li",null,[jt,(0,l.Uk)(" "+(0,u.zw)(e.zipFile.getFileName()),1)]),(0,l._)("li",null,[Dt,(0,l.Uk)(" "+(0,u.zw)(e.zipFile.getFileSize())+" Bytes",1)])])],16)):(0,l.kq)("",!0),e.payload&&e.payload.metadata?((0,l.wg)(),(0,l.iD)("div",(0,u.vs)((0,l.dG)({key:1},e.$attrs)),[(0,l._)("ul",At,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.otaMetadata,(function(t){return(0,l.wg)(),(0,l.iD)("li",{key:t.name},[(0,l._)("strong",null,(0,u.zw)(t.name.trim()+" "),1),(0,l._)("p",Bt,(0,u.zw)(String(e.payload[t.key]).trim()),1)])})),128))])],16)):(0,l.kq)("",!0),e.payload&&e.payload.manifest?((0,l.wg)(),(0,l.iD)("div",Zt,[(0,l._)("ul",Ct,[(0,l._)("li",null,[Nt,e.payload.preBuild?((0,l.wg)(),(0,l.iD)("span",Rt," ✅ ")):((0,l.wg)(),(0,l.iD)("span",Mt," ❌ "))]),(0,l._)("li",null,[Ft,e.payload.manifest.partialUpdate?((0,l.wg)(),(0,l.iD)("span",Ut," ✅ ")):((0,l.wg)(),(0,l.iD)("span",Vt," ❌ "))]),(0,l._)("li",null,[Ht,e.payload.manifest.nonAB?((0,l.wg)(),(0,l.iD)("span",qt," ❌ ")):((0,l.wg)(),(0,l.iD)("span",Wt," ✅ "))]),(0,l._)("li",null,[Kt,e.payload.manifest.dynamicPartitionMetadata.snapshotEnabled?((0,l.wg)(),(0,l.iD)("span",Jt," ✅ ")):((0,l.wg)(),(0,l.iD)("span",Yt," ❌ "))]),(0,l._)("li",null,[Gt,e.payload.manifest.dynamicPartitionMetadata.vabcEnabled?((0,l.wg)(),(0,l.iD)("span",$t," ✅ ")):((0,l.wg)(),(0,l.iD)("span",Xt," ❌ "))]),e.totalDynamicPartitionSize?((0,l.wg)(),(0,l.iD)("li",Qt,[en,(0,l.Uk)(" "+(0,u.zw)(e.totalDynamicPartitionSize),1)])):(0,l.kq)("",!0),e.totalCOWSize?((0,l.wg)(),(0,l.iD)("li",tn,[nn,(0,l.Uk)(" "+(0,u.zw)(e.totalCOWSize),1)])):(0,l.kq)("",!0)])])):(0,l.kq)("",!0)],64)}n(7327),n(189),n(6755);var an=function(){function e(t){(0,ve.Z)(this,e),(0,we.Z)(this,"file",void 0),(0,we.Z)(this,"reader",void 0),this.file=t,this.reader=ln(t)}return(0,be.Z)(e,[{key:"getFileName",value:function(){return un(this.file)}},{key:"getFileSize",value:function(){return this.file instanceof File?this.file.size:0}}]),e}();function on(e,t){return sn.apply(this,arguments)}function sn(){return sn=(0,b.Z)(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,l,u,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,a=new _e._Q(new _e.U5("application/zip")),e.next=4,r.getEntries();case 4:o=e.sent,i=(0,he.Z)(o.filter((function(e){return!!e&&n(e)}))),e.prev=6,i.s();case 8:if((s=i.n()).done){e.next=18;break}return l=s.value,u=new _e.U5,e.next=13,l.getData(u);case 13:c=e.sent,console.log("Adding ".concat(l.filename,", ").concat(c.size)),a.add(l.filename,new _e.Nt(u.getData()),{level:0});case 16:e.next=8;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](6),i.e(e.t0);case 23:return e.prev=23,i.f(),e.finish(23);case 26:return e.abrupt("return",a);case 27:case"end":return e.stop()}}),e,null,[[6,20,23,26]])}))),sn.apply(this,arguments)}function ln(e){return e instanceof File?new _e.Mr(new _e.Nt(e)):new _e.Mr(new _e.pE(e.href))}function un(e){return e instanceof File?e.name:e.pathname}function cn(e){return pn.apply(this,arguments)}function pn(){return pn=(0,b.Z)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,on(ln(t),(function(e){return e.filename.startsWith("META/")||e.filename.endsWith(".map")}));case 2:return n=e.sent,e.next=5,n.close();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),pn.apply(this,arguments)}function fn(e){return dn.apply(this,arguments)}function dn(){return dn=(0,b.Z)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,on(t.zipreader,(function(e){return"payload.bin"!=e.filename}));case 2:return n=e.sent,e.next=5,n.add("payload.bin",new _e.Nt(t.buffer.slice(0,t.getMetadataLength())),{level:0});case 5:return e.next=7,n.close();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),dn.apply(this,arguments)}function hn(e,t,n){var r=window.URL.createObjectURL(e);t.href=r,t.download=n,t.click(),window.URL.revokeObjectURL(r)}function gn(e,t){return e.endsWith(t)?e:e+t}var mn=(0,l.aZ)({props:{zipFile:{type:an,required:!0},payload:{type:Re,required:!0}},data:function(){return{MetadataFormat:De}},computed:{otaMetadata:function(){var e=this;return De.filter((function(t){return String(e.payload[t.key]).length>0}))},totalCOWSize:function(){var e,t,n=null===(e=this.payload)||void 0===e||null===(t=e.manifest)||void 0===t?void 0:t.partitions.map((function(e){return e.estimateCowSize||0}));return n?n.reduce((function(e,t){return e+t})):0},totalDynamicPartitionSize:function(){var e,t,n,r,a=null===(e=this.payload)||void 0===e||null===(t=e.manifest)||void 0===t||null===(n=t.dynamicPartitionMetadata)||void 0===n?void 0:n.groups;if(!a)return 0;var o=new Set(a.flatMap((function(e){return e.partitionNames}))),i=(null===(r=this.payload.manifest)||void 0===r?void 0:r.partitions.filter((function(e){return o.has(e.partitionName)})))||[];return i.length<=0?0:i.map((function(e){var t;return(null===(t=e.newPartitionInfo)||void 0===t?void 0:t.size)||0})).reduce((function(e,t){return e+t}))}}});const yn=(0,d.Z)(mn,[["render",rn],["__scopeId","data-v-0514c264"]]);var wn=yn,bn=(0,l.aZ)({components:{PartitionDetail:Et,BasicInfo:wn},props:{zipFile:{type:an,default:null},payload:{type:Re,default:null}},methods:{octToHex:Ve,exportOTAPackage:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fn(e.payload);case 2:n=t.sent,r=e.$refs["download"],hn(n,r,"trimmed_"+gn(e.zipFile.getFileName(),".zip"));case 5:case"end":return t.stop()}}),t)})))()}},computed:{dynamicPartitions:function(){var e,t,n;return(null===(e=this.payload.manifest)||void 0===e||null===(t=e.dynamicPartitionMetadata)||void 0===t||null===(n=t.groups)||void 0===n?void 0:n.flatMap((function(e){return e.partitionNames||[]})))||[]}}});const vn=(0,d.Z)(bn,[["render",Z],["__scopeId","data-v-05db67f2"]]);var On=vn,xn=(0,l.Uk)("Export Target File Metadata"),kn={ref:"download"},_n={key:1},Sn=(0,l.Uk)(" Analyse Installed Blocks (in target build) "),Pn=(0,l.Uk)(" Analyse Payload Composition "),In=(0,l.Uk)(" Analyse COW Merge Operations "),En={key:0,class:"tooltiptext"},zn=(0,l.Uk)(" Analyse Filenames "),Ln=(0,l.Uk)(" Analyse File Extensions ");function Tn(e,t,n,r,a,o){var i=(0,l.up)("v-btn"),s=(0,l.up)("PartialCheckbox"),u=(0,l.up)("PieChart"),c=(0,l.up)("v-divider"),p=(0,l.up)("v-col"),f=(0,l.up)("v-row"),d=(0,l.up)("BaseFile");return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.targetFile?((0,l.wg)(),(0,l.j4)(i,{key:0,block:"",class:"md-6",onClick:e.exportTargetFileMetadata},{default:(0,l.w5)((function(){return[xn]})),_:1},8,["onClick"])):(0,l.kq)("",!0),(0,l._)("a",kn,null,512),(0,l.Wm)(s,{modelValue:e.partitionInclude,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.partitionInclude=t}),labels:e.updatePartitions},null,8,["modelValue","labels"]),e.echartsData?((0,l.wg)(),(0,l.iD)("div",_n,[(0,l.Wm)(u,{echartsData:e.echartsData,onClick:e.piechartClick},null,8,["echartsData","onClick"])])):(0,l.kq)("",!0),(0,l.Wm)(c),(0,l.Wm)(f,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(p,{cols:"12",md:"6"},{default:(0,l.w5)((function(){return[(0,l.Wm)(i,{block:"",onClick:t[1]||(t[1]=function(t){return e.updateChart("blocks")})},{default:(0,l.w5)((function(){return[Sn]})),_:1})]})),_:1}),(0,l.Wm)(p,{cols:"12",md:"6"},{default:(0,l.w5)((function(){return[(0,l.Wm)(i,{block:"",onClick:t[2]||(t[2]=function(t){return e.updateChart("payload")})},{default:(0,l.w5)((function(){return[Pn]})),_:1})]})),_:1})]})),_:1}),(0,l.Wm)(f,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(p,{cols:"12",md:"6",class:"tooltip"},{default:(0,l.w5)((function(){return[(0,l.Wm)(i,{disabled:e.manifest.nonAB||!e.manifest.dynamicPartitionMetadata.vabcEnabled,title:"Only available for VABC update",block:"",onClick:t[3]||(t[3]=function(t){return e.updateChart("COWmerge")})},{default:(0,l.w5)((function(){return[In]})),_:1},8,["disabled"]),e.manifest.nonAB?((0,l.wg)(),(0,l.iD)("span",En," This function is only supported in A/B OTA ")):(0,l.kq)("",!0)]})),_:1}),(0,l.Wm)(p,{cols:"12",md:"6"},{default:(0,l.w5)((function(){return[(0,l.Wm)(i,{block:"",disabled:!e.targetFile,onClick:t[4]||(t[4]=function(t){return e.updateChart("filenames")})},{default:(0,l.w5)((function(){return[zn]})),_:1},8,["disabled"])]})),_:1})]})),_:1}),(0,l.Wm)(f,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(p,{cols:"12",md:"6"},{default:(0,l.w5)((function(){return[(0,l.Wm)(i,{block:"",disabled:!e.targetFile,onClick:t[5]||(t[5]=function(t){return e.updateChart("extensions")})},{default:(0,l.w5)((function(){return[Ln]})),_:1},8,["disabled"])]})),_:1})]})),_:1}),(0,l.Wm)(f,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(p,{cols:"12",md:"6"}),(0,l.Wm)(p,{cols:"12",md:"6"},{default:(0,l.w5)((function(){return[e.demo?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(d,{key:0,label:"Drag and drop or Select The target Android build",onFileSelect:e.selectBuild},null,8,["onFileSelect"]))]})),_:1})]})),_:1})],64)}var jn=n(9669),Dn=n.n(jn),An=["value","checked"],Bn={key:0};function Zn(e,t,n,r,a,o){var i=(0,l.up)("v-btn"),s=(0,l.up)("v-col"),c=(0,l.up)("v-row");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(i,{block:"",type:"button",class:"my-5",onClick:e.revertAllSelection},{default:(0,l.w5)((function(){return[(0,l.Uk)((0,u.zw)(e.selectAllText[e.selectAll]),1)]})),_:1},8,["onClick"]),(0,l.Wm)(c,{class:"mb-5"},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.labels,(function(n){return(0,l.wg)(),(0,l.j4)(s,{key:n,cols:"12",md:"4"},{default:(0,l.w5)((function(){return[(0,l._)("input",{type:"checkbox",value:n,checked:e.modelValue.get(n),onChange:t[0]||(t[0]=function(t){return e.updateSelected(t.target.value)})},null,40,An),n?((0,l.wg)(),(0,l.iD)("label",Bn,(0,u.zw)(n),1)):(0,l.kq)("",!0)]})),_:2},1024)})),128))]})),_:1})],64)}var Cn=(0,l.aZ)({props:{labels:{type:Array,default:new Array},modelValue:{type:Map,default:new Map}},data:function(){return{selectAll:1,selectAllText:["Select All","Unselect All"]}},mounted:function(){var e,t=(0,he.Z)(this.labels);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.modelValue.set(n,!0)}}catch(r){t.e(r)}finally{t.f()}},methods:{updateSelected:function(e){this.modelValue.set(e,!this.modelValue.get(e)),this.$emit("update:modelValue",this.modelValue)},revertAllSelection:function(){this.selectAll=1-this.selectAll;var e,t=(0,he.Z)(this.modelValue.keys());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.modelValue.set(n,Boolean(this.selectAll))}}catch(r){t.e(r)}finally{t.f()}}}});const Nn=(0,d.Z)(Cn,[["render",Zn],["__scopeId","data-v-533f2336"]]);var Rn=Nn,Mn=n(4781);function Fn(e,t,n,r,a,o){var i=arguments,s=(0,l.up)("v-chart");return(0,l.wg)(),(0,l.j4)(s,{class:"chart",option:o.getEchartsOption,onClick:t[0]||(t[0]=function(t){return e.$emit.apply(e,["click"].concat((0,Mn.Z)(i)))})},null,8,["option"])}var Un=n(8023),Vn=n(1416),Hn=n(8650),Wn=n(8690),qn=n(3703),Kn=n(6179),Jn=n(487);(0,Un.D)([Vn.N,Hn.N,Wn.N,qn.N,Kn.N]);var Yn={components:{VChart:Jn.ZP},provide:(0,we.Z)({},Jn.bw,"dark"),props:{echartsData:{type:at,required:!0}},computed:{getEchartsOption:function(){return this.echartsData.getEchartsOption()}}};const Gn=(0,d.Z)(Yn,[["render",Fn],["__scopeId","data-v-5d1cb486"]]);var $n=Gn,Xn=(0,l.aZ)({components:{PartialCheckbox:Rn,PieChart:$n,BaseFile:I},props:{manifest:{type:de.DeltaArchiveManifest,default:function(){return[]}},demo:{type:Boolean,default:!1}},data:function(){return{partitionInclude:new Map,echartsData:null,listData:"",targetFile:null}},computed:{updatePartitions:function(){return this.manifest.partitions.map((function(e){return e.partitionName}))}},mounted:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.demo){t.next=11;break}return t.prev=1,t.next=4,Dn().get("./files/cf_x86_target_file_demo.zip",{responseType:"blob"});case 4:n=t.sent,e.targetFile=new File([n.data],"target_demo.zip"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),console.log("Please put a proper example target file in /public/files/");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},methods:{piechartClick:function(e){console.log(e)},updateChart:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.manifest.partitions.filter((function(e){return t.partitionInclude.get(e.partitionName)})),n.prev=1,n.next=4,yt(e,r,t.manifest.blockSize,t.targetFile);case 4:t.echartsData=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),alert("Cannot be processed for the following issue: ".concat(n.t0));case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},selectBuild:function(e){this.targetFile=e},exportTargetFileMetadata:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,cn(e.targetFile);case 2:n=t.sent,r=e.$refs["download"],hn(n,r,"trimmed_"+gn(un(e.targetFile),".zip"));case 5:case"end":return t.stop()}}),t)})))()}}});const Qn=(0,d.Z)(Xn,[["render",Tn],["__scopeId","data-v-44b569bd"]]);var er=Qn,tr=(0,l.aZ)({components:{BaseFile:I,PayloadDetail:On,PayloadComposition:er},data:function(){return{zipFile:null,payload:null}},methods:{unpackOTA:function(e){var t=this;return(0,b.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.zipFile=new an(e),n.prev=1,t.payload=new Re(t.zipFile),n.next=5,t.payload.init();case 5:n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),alert("Please check if this is a correct OTA package (.zip). ".concat(n.t0)),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}});const nr=(0,d.Z)(tr,[["render",w]]);var rr=nr;function ar(e,t,n,r,a,o){var i=(0,l.up)("PayloadDetail"),s=(0,l.up)("v-col"),u=(0,l.up)("v-divider"),c=(0,l.up)("PayloadComposition"),p=(0,l.up)("v-row");return(0,l.wg)(),(0,l.j4)(p,null,{default:(0,l.w5)((function(){return[(0,l.Wm)(s,{cols:"12",md:"6"},{default:(0,l.w5)((function(){return[e.zipFile&&e.payload?((0,l.wg)(),(0,l.j4)(i,{key:0,zipFile:e.zipFile,payload:e.payload},null,8,["zipFile","payload"])):(0,l.kq)("",!0)]})),_:1}),(0,l.Wm)(u,{vertical:""}),(0,l.Wm)(s,{cols:"12",md:"6"},{default:(0,l.w5)((function(){return[e.zipFile&&e.payload.manifest?((0,l.wg)(),(0,l.j4)(c,{key:0,manifest:e.payload.manifest,demo:!0},null,8,["manifest"])):(0,l.kq)("",!0)]})),_:1})]})),_:1})}var or=(0,l.aZ)({components:{PayloadDetail:On,PayloadComposition:er},data:function(){return{zipFile:null,payload:null}},created:function(){var e=this;return(0,b.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Dn().get("./files/cf_x86_demo.zip",{responseType:"blob"});case 3:return n=t.sent,e.zipFile=new an(new File([n.data],"ota_demo.zip")),e.payload=new Re(e.zipFile),t.next=8,e.payload.init();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log("Please put a proper example OTA in /public/files/");case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}});const ir=(0,d.Z)(or,[["render",ar]]);var sr=ir,lr={class:"about"},ur=(0,l._)("p",null,"A web based tool to inspect Android OTA packages.",-1),cr=[ur];function pr(e,t){return(0,l.wg)(),(0,l.iD)("div",lr,cr)}const fr={},dr=(0,d.Z)(fr,[["render",pr]]);var hr=dr,gr=function(e){return(0,l.dD)("data-v-50c6f348"),e=e(),(0,l.Cn)(),e},mr=gr((function(){return(0,l._)("h1",null,"Not Found!",-1)})),yr=gr((function(){return(0,l._)("p",null,[(0,l._)("a",{href:"/"},"Go home?")],-1)}));function wr(e,t){var n=(0,l.up)("center");return(0,l.wg)(),(0,l.j4)(n,null,{default:(0,l.w5)((function(){return[mr,yr]})),_:1})}const br={},vr=(0,d.Z)(br,[["render",wr],["__scopeId","data-v-50c6f348"]]);var Or=vr,xr=[{path:"/",name:"Analysis",component:rr,meta:{title:"Analyse OTA package - from AOSP"}},{path:"/demo",name:"Demo",component:sr},{path:"/about",name:"About",component:hr},{path:"/:catchAll(.*)",name:"Not Found",component:Or}],kr=(0,m.p7)({history:(0,m.PO)("/analyseOTA/"),routes:xr});kr.beforeEach((function(e,t,n){var r=e.matched.slice().reverse().find((function(e){return e.meta&&e.meta.title})),a=(e.matched.slice().reverse().find((function(e){return e.meta&&e.meta.metaTags})),t.matched.slice().reverse().find((function(e){return e.meta&&e.meta.metaTags})));r?document.title=r.meta.title:a&&(document.title=a.meta.title),Array.from(document.querySelectorAll("[data-vue-router-controlled]")).map((function(e){return e.parentNode.removeChild(e)})),n()}));var _r=kr,Sr=n(8410),Pr=(0,Sr.MT)({state:{},mutations:{},actions:{},modules:{}}),Ir=(0,r.ri)(g);Ir.use(_r),Ir.use(Pr),Ir.use(s),Ir.mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,o){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],o=e[c][2];for(var s=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[l])}))?r.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,i=r[0],s=r[1],l=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(l)var c=l(n)}for(t&&t(r);u<i.length;u++)o=i[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self["webpackChunkota_analyzer"]=self["webpackChunkota_analyzer"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(2848)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.5c0fd10a.js.map